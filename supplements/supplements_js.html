<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Choquet Olivier & Vandenheede Driss">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>e-Syllabus HTML5 et CSS3 - Méthodologie</title>
        <!-- une icône dans la barre du navigateur -->
        <link rel="icon" href="../images/favicon.png" type="image/png">
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <!-- bannière et menu -->
        <header>
            <div class="logoTitle">
                <h1>Cours d'introduction au Web</h1>
                <h2>HTML5 et CSS3</h2>
            </div>
            <nav>
                <ul>
                    <li><a href="../index.html">Le cours</a></li>
                    <li><a href="../internet.html">Internet</a></li>
                    <li><a href="../html5.html">HTML5</a></li>
                    <li><a href="../css3.html">CSS3</a></li>
                    <li><a href="../methodologie.html">Méthodologie</a></li>
                    <li><a href="../lexique.html">Lexique</a></li>
                    <li><a href="../supplements.html" class="current">Suppléments</a></li>
                </ul>
            </nav>
        </header>
        <main id="container">
            <div id="menu">
                <nav>
                    <ol>
                        <li><a href="../supplements.html">Retour au sommaire</a></li>
                        <li><a href="#intro_js">Introduction à JavaScript</a></li>
                        <li><a href="#elements_syntaxe_js">Éléments de syntaxe JS</a></li>
                        <li><a href="#validation_formulaire_js">Validation de formulaire JS</a></li>
                        <li><a href="#gestion_cookies">Gestion des cookies</a></li>
                        <li><a href="#dom">Le DOM</a></li>
                        <li><a href="#decouplage_html_js">Découplage HTML/JS</a></li>
                        <li><a href="#jquery">JQuery</a></li>
                        <li><a href="#syntaxe_jquery">Syntaxe de JQuery</a></li>
                        <li><a href="#evenements_jquery">Les événements en JQuery</a></li>
                        <li><a href="#methodes_jquery">Les méthodes de JQuery</a></li>
                        <li><a href="#validation_formulaire_jquery">Validation de formulaire en JQuery</a></li>
                        <li><a href="#ajax">AJAX</a></li>
                        <li><a href="#objets_js">Les objets JavaScript</a></li>
                        <li><a href="#intro_json">JSON</a></li>
                    </ol>
                </nav>
                <!-- aside lié à la page et pas à l'article donc pas à l'intérieur de article -->
                <aside>
                    <p>Liens utiles :</p>
                    <ul>
                        <li><a href="http://www.w3schools.com/js/default.asp" target="_blank">Tutoriel JavaScript de W3Schools</a></li>
                        <li><a href="http://www.w3.org/" target="_blank">W3C</a></li>
                        <li><a href="http://fr.openclassrooms.com/informatique/cours/apprenez-a-creer-votre-site-web-avec-html5-et-css3" target="_blank">Open Classroom</a></li>
                        <li><a href="http://www.w3.org/TR/html5/" target="_blank">Norme HTML5</a></li>
                        <li><a href="http://www.w3schools.com/" target="_blank">W3Schools</a></li>
                        <li><a href="http://www.alsacreations.com/" target="_blank">Alsa Création</a></li>
                        <li><a href="https://www.youtube.com/c/LeDesignerduWeb/videos">Le Designer du web</a></li>
                    </ul>
                </aside>
            </div>
            <section id="mainSection">
                <article>
                    <h1>JavaScript, JQuery, AJAX et JSON :</h1>
                </article>
                <article>
                    <h2 id="intro_js">Introduction à JavaScript :</h2>
                    <p><span class="em">JavaScript</span> est un langage de scripts essentiellement utilisé pour enrichir les pages HTML de code exécutable par le navigateur. Attention ! Il n' a guère qu'une partie de son nom en commun avec le langage Java ! L'utilisation de JavaScript s'étend de plus en olus vers de nouvelles cibles comme la programmation sur le serveur. Nous ne prendrons en compte ici que son utilisation pour les navigateurs.</p>
                    <p>Ce langage permet d'apporter du dynamisme au niveau des pagesWeb. Nous percevons immédiatement une contradiction entre le fait qu'un navigateur doive essentiemment se contenter de réaliser l'affichage de pages et celui de lui faire exécuter du code. On veillera donc à limiter au maximum l'utilisation de code JavaScript pour :</p>
                    <ul>
                        <li>éviter d'alourdir les documents HTML</li>
                        <li>faciliter leur maintenance</li>
                        <li>ne pas surcharger de traitements les postes de travail</li>
                    </ul>
                    <p>Veillons aussi à produire des pages qui pourront être exploitées sur un maximum de types de navigateurs en n'oubliant pas que cerains d'entre eux n'intègrent pas JavaScript (exemple : certains browsers de smartphones) et que certains utilisateurs inhibent JavaScript.</p>
                    <p>JavaScript est le premier outil nous permettant de faire évoluer un navigateur de la notion de "client léger" à celle de "client riche".</p>
                    <p>De manière générale, JavaScript est utilise pour :</p>
                    <ul>
                        <li>Permettre de réaliser des validations de données saisies dans des formulaires.</li>
                        <li>Pour gérer les cookies.</li>
                        <li>Pour éviter d'augmenter inutilement le nombre de requêtes soumises au serveur Web.</li>
                        <li>Il est peut aussi permettre d'enrichir la présentation de la page (menus dynamiques par exemple).</li>
                    </ul>
                    <p>Il peut aussi être utilisé pour faire clignoter une guirlande, faire traverser l'écran par un canard ou demander à un poisson de suivre votre souris (comme quoi il faut savoir ne pas abuser des bonnes choses, ...).</p>
                    <h3 id="integration_au_HTML_js">Intégration au HTML :</h3>
                    <p>Un script Javascript sera fourni dans la balise <span class="em">script</span> avec l'attribut <span class="em">type</span> de valeur <span class="em">text/javascript</span>. Il existe également une version plus complexe tenant compte des vieux navigateurs qui ne gèrent pas le JavaScript. En HTML5, on déconseille de spécifier explicitement le type s'il s'agit de <span class="em">text/javascript</span> : <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" target="_blank">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script</a>.</p>
                    <p>Soit direment dans le code HTML :</p>
<pre><code>&lt;script type="text/javascript"&gt;
    // code du script...
&lt;/script&gt;</code></pre>
                    <p>Soit par référence à un fichier externe :</p>
                    <p class="html">&lt;script type="text/javascript" src="scriptname.js"&gt;&lt;/script&gt;</p>
                    <p>On préfèrera cette deuxième option par souci de lisibilité du code.</p>
                    <h3 id="declenchement_code_js">Déclenchement du code :</h3>
                    <p>Une balise <span class="em">&lt;script type="text/javascript"&gt;</span> peut apparaîtra soit dans le <span class="em">head</span> de la page, soit dans le <span class="em">body</span>. Le chargement du fichier de script JavaScript interrompt celui du fichier HTML. Tous les scripts invoqués dans le fichier JavaScript sont immédiatement exécutés lors du chargement dudit fichier.</p>
                    <h3 id="elements_syntaxe_js">Quelques éléments de syntaxe de JavaScript</h3>
                    <ul>
                        <li>
                            <p>Une instruction JS ("statement") se compose de :</p>
                            <ul>
                                <li>Expressions</li>
                                <li>Valeurs</li>
                                <li>Opérateurs (+, -, ...)</li>
                                <li>Mots clés (for, break, ...)</li>
                                <li>Commentaires</li>
                            </ul>
                        </li>
                        <li>Les instructions sont délimitées par le point-virgule mais celui-ci n'est obligatoire que si l'on désire reprendre plusieurs instructions sur la même ligne.</li>
                        <li>Les commentaires sont repris, sur une ligne derrière les caractères <span class="em">//</span>.</li>
                        <li>Les noms de variables sont sensibles à la casse. Il est possible également d'utiliser directement une variable sans utiliser <span class="em">let</span> (portée associée à un bloc), <span class="em">var</span> (portée globale) ou <span class="em">const</span> (portée associée à un bloc et immuable (la valeur ne peut pas être changée) !</li>
                        <li>Les instructions de contrôle de séquence (<span class="html">if</span>, <span class="html">while</span>, ...) sont sensiblement les mêmes qu'en Java.</li>
                    </ul>
                    <p>Dans le cadre de ce cours, nous nous obligerons à respecter la convention suivante :</p>
                    <ul>
                        <li>Toutes les variables seront déclarées !</li>
                        <li>Les variables seront déclarées avec let ou const !</li>
                        <li>Aucune variable sans déclaration !</li>
                        <li>Aucune variable déclarée avec var !</li>
                    </ul>
                    <h3 id="exemple_simple_js">Un exemple simple :</h3>
                    <p>Plaçons ceci dans le body d'un de nos précédents documents HTML :</p>
<pre><code>&lt;script type="text/javascript"&gt;
    document.write("Added by JavaScript code : ");
    document.write("He2b-Esi &lt;3");
&lt;/script&gt;</code></pre>
                    <p>Nous pouvons aussi sauvegarder ce script à part dans un fichier <span class="em">Myscript.js</span>, dont la référence relative au document HTML ou sa référence absolue sera fournie dans l'attribut source de l'élément <span class="html">script</span>. Si le fichier se trouve dans le même répertoire que le document HTML, nous pourrons le référencer comme suit :</p>
                    <p class="html">&lt;script type="text/javascript" src="MyScript.js"&gt;&lt;/script&gt;</p>
                    <h3>Quelques utilisations classiques :</h3>
                    <h4 id="validation_formulaire_js">Validation de formulaire :</h4>
                    <p>Un cas classique est celui de la validation d'un champ de saisie devant être numérique. Nous allons réaliser la validation lors de la perte du focus par le contrôle (voir <a href="http://www.w3schools.com/tags/ref_eventattributes.asp" target="_blank">http://www.w3schools.com/tags/ref_eventattributes.asp</a> pour une liste des événements gérés).</p>
<pre class="taille60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Validation de formulaire&lt;/title&gt;
        &lt;script type="text/javascript"&gt;
            function validateNumeric(champ) {
                if (isFinite(champ.value)) {
                    return true;
                } else {
                    alert("Vous ne pouvez entrer que des nombres !");
                    return false;
                }
            }
        &lt;/script&gt;
    &lt;/head&gt;
    
    &lt;body&gt;
            &lt;h1&gt;Validation externe&lt;/h1&gt;
            &lt;form name="InfoPersonnelle"&gt;
                Âge : &lt;input type="text" name="saisie" <span class="html">onblur</span>="validateNumeric"&gt;
            &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                    <h5>Remarques :</h5>
                    <ul>
                        <li>D'autres événements peuvent vous intéresser <span class="html">onclick</span>, <span class="html">onkeypress</span>, <span class="html">onload</span>, ... En voici la liste complète : <a href="http://www.w3schools.com/jsref/dom_obj_event.asp" target="_blank">http://www.w3schools.com/jsref/dom_obj_event.asp</a>.</li>
                        <li>Par convention, si la méthode associée à l'événement renvoie <span class="em">false</span> (comme dans l'exemple ci-dessusà, cela signifie que l'événement n'a pas eu lieu : la page ne sera pas soumise, le caractère pas rentré, ...</li>
                        <li>Si nous désirons réakuser une validation lors de l'envoi du formulaire nous serons obliger d'écrire un script spécifique au formulaire.</li>
                        <li>Nous verrons par la suite que nous veillerons à éviter l'utilisation des fonctions <span class="html">alert()</span>, <span class="html">confirm()</span>, <span class="html">prompt()</span>, ... qui ont tendance à alourdir l'interface.</li>
                    </ul>
                    <h4 id="gestion_cookies_js">Gestion des cookies :</h4>
                    <p>Un <span class="em">Cookie</span> est un petit fichier texte, chiffré ou non, que des sites visités peuvent stocker sur votre machine pour être récupérés d'une visite à l'autre (pour vous faciliter la navigation, pour vous tracer, ...). Seul le site ayant stocké le cookie y a accès.</p>
                    <p>Un cookie est une paire <span class="em">nom=valeur</span> associé à un serveur et stockée sur le poste client. Lorsque le navigateur envoie une requête à un serveur, il lui envoie également tous les cookies associés.</p>
                    <p>Un cookie possède aussi une date d'expiration. JavaScript permet, via <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie" target="_blank">la propriété cookie du document</a>, de lire et de créer des cookies. La version simplifiée qu'on présente ici peut être prise en défaut dans certains cas particuliers.</p>
<pre class="taille60"><code>function setCookie(nom, valeur) {
    document.cookie = nom + "=" + encodeURI(valeur);
}

function getCookie(nom) {
    // Tous les cookies sont reçus dans une seule chaîne,
    // séparés par des point-virgules, qu'il faut découper.
    start = document.cookie.indexOf(nom + "=");
    if (start != -1) {
        start = start + nom.length + 1;
        end = document.cookie.indexOf(";", start);
        if (end == -1) {
            end = document.cookie.length;
        }
        return unescape(document.cookie.substring(start, end));
    } else {
        return "";
    }
}</code></pre>
                    <h3 id="dom">DOM (Document Object Model) :</h3>
                    <p>Le Document Object Model va nous permettre de manipuler (consulter/modifier) notre page web via le code JavaScript. On va pouvoir, par exemple, ajouter un message d'erreur à côté d'un champ erroné. C'est également un élément essentiel d'Ajax que nous verrons ultérieurement.</p>
                    <p>Le <a href="https://developer.mozilla.org/fr/DOM" class="em">DOM (Document Object Model)</a>, ou modèle objet de document, est une API pour les documents HTML et XML. Le DOM fournitune représentation structurelle du document, permettant de modifier son contenu et sa présentation visuelle. Fondamentalement, il relie les pages Web aux scripts et langages de programmation.</p>
                    <p>Concrètement, cela signifie qu'au niveau de JavaScript on dispose d'une représentation du document HTML sous forme d'un "arbre", chaque "noeud" correspond à une balise du document. Cet arbre peut être parcouru mais surtout modifié. Les possibilités sont énormes mais nous l'utiliserons essentiellement :</p>
                    <ul>
                        <li>Pour faire apparaître des messages d'information ou d'erreurs aux endroits appropriés de la page.</li>
                        <li>Avec la technologie AJAX dont il est une des composantes essentielles.</li>
                    </ul>
                    <h4 id="elements_syntaxe_dom">Quelques éléments de syntaxe</h4>
                    <p>Nous ne présentant que la toute petite partie qui sert à notre propos. Nous en dirons un peu plus lorsque nous introduirons les technologies <span class="em">XSL</span> et, comme d'habitude, vous trouverez plus d'informations sur le site de la W3 Schools (<a href="http://www.w3schools.com/jsref/dom_obj_document.asp" target="_blank">http://www.w3schools.com/jsref/dom_obj_document.asp</a>).</p>
                    <ul>
                        <li>Il existe un certain nombre d'objets prédéfinis. Vous apprendrez à l'usage les méthodes et attributs offerts : document (la racine de l'arbre), window (la fenêtre), ...</li>
                        <li>
                            <p>On peut accéder à un ou des noeuds de l'arbre :</p>
                            <ul>
                                <li><span class="html">getElementById("id")</span> ; le noeud correspondant à cet identifiant unique.</li>
                                <li><span class="html">getElementsByTagName("tag")</span> : un tableau de noeuds porteurs de ce tag.</li>
                                <li><span class="html">querySelector(selecteur CSS)</span> : le premier élément dans la descendance de l'élément appelant la méthode <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector" target="_blank">querySelector</a> compatible avec le sélecteur CSS en argument.</li>
                            </ul>
                        </li>
                        <li>
                            <p>On peut interroger un noeud via des attributs :</p>
                            <ul>
                                <li>L'attribut <span class="html">innerHTML</span> correspond au code HTML inclus dans un noeud.</li>
                                <li>L'attribut <span class="html">style</span> donne le style associé à un noeud.</li>
                                <li>L'attribut <span class="html">attributes</span> donne les attributs associés à un noeud.</li>
                                <li>Il y a aussi : <span class="html">nodeType</span>, <span class="html">nodeName</span>, <span class="html">nodeValue</span>, ...</li>
                            </ul>
                        </li>
                        <li>On peut, à partir d'un noeud, se promener dans l'arbre : <span class="html">parentNode</span>, <span class="html">childNodes</span>, <span class="html">firstChild</span>, <span class="html">lastChild</span>, <span class="html">nextSibling</span>, <span class="html">previousSibling</span>.</li>
                        <li>On peut aussi modifier l'arbre : <span class="html">createElement</span>, <span class="html">createTextNode</span>, <span class="html">appendChild</span>, <span class="html">insertBefore</span>, <span class="html">replaceChild</span>, <span class="html">cloneNode</span>, <span class="html">removeChild</span>.</li>
                    </ul>
                    <h4 id="exemple_recapitulatif_dom">Exemple récapitulatif :</h4>
                    <p>Si le document contient <span class="html">&lt;span id="titre"&gt;&lt;/span&gt;</span>, alors le bout de code suivant permet d'insérer un titre :</p>
                    <p class="html">document.getElementById("titre").innerHTML = "Compléments Applications";</p>
                    <p>Le code suivant affiche un message avec le nombre de paragraphes (à lancer via l'événement <span class="html">onload</span> de la balise <span class="html">&lt;body&gt;</span> par exemple).</p>
<pre class="taille60"><code>function countParagraphs {
    var myParagraphs = document.getElementsByTagName("p");
    alert(myParagraphs.length);
}</code></pre>
                    <h3 id="decouplage_html_js">Découplage HTML / JavaScript :</h3>
                    <p>Tout comme il est de bonne pratique de découpler le contenu HTML de la mise en forme CSS, en liant le(s) fichier(s) CSS à l'aide de la balise <span class="html">&lt;link&gt;</span>, il est conseillé de séparer HTML et JavaScript à l'aide de l'attribut <span class="em">src</span> de la balise <span class="html">&lt;script&gt;</span>.</p>
                    <p>Par ailleurs, il est également conseillé de découpler fortement les éléments HTML du JavaScript en associant les gestionnaires d'événements dynamiques en JavaScript plutôt que statiquement dans le document HTML.</p>
                    <p>Dans la suite, voyons en détails comment associer une fonction de validation à un champ d'un formulaire, comme cela a été déjà rapidemment montré ci-dessus.</p>
                    <h4 id="js_interne">JavaScript interne :</h4>
                    <p>Reprenons le document HTML avec un script interne :</p>
<pre class="taille60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Validation de formulaire&lt;/title&gt;
        &lt;script type="text/javascript"&gt;
            function validateNumeric(champ) {
                if (isFinite(champ.value)) {
                    return true;
                } else {
                    alert("Vous ne pouvez entrer que des nombres !");
                    return false;
                }
            }
        &lt;/script&gt;
    &lt;/head&gt;
    
    &lt;body&gt;
            &lt;h1&gt;Validation externe&lt;/h1&gt;
            &lt;form name="InfoPersonnelle"&gt;
                Âge : &lt;input type="text" name="saisie" <span class="html">onblur</span>="validateNumeric"&gt;
            &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                        <h4 id="js_externe">JavaScript externe</h4>
                        <h5 id="association_statique">Association statique :</h5>
                        <p>Le script est déplacé dans un fichier <span class="em">formvalidate.js</span> :</p>
<pre class="taille60"><code>function validateNumeric(champ) {
    if (isFinite(champ.value)) {
        return true;
    } else {
        alert("Vous ne pouvez entrer que des nombres !");
        return false;
    }
}</code></pre>
                    <p>Et le fichier HTML est inchangé à l'exception du lien vers ce script :</p>
<pre class="taille60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Validation de formulaire&lt;/title&gt;
        &lt;script type="text/javascript" src="formvalidate.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    
    &lt;body&gt;
            &lt;h1&gt;Validation externe&lt;/h1&gt;
            &lt;form name="InfoPersonnelle"&gt;
                Âge : &lt;input type="text" name="saisie" <span class="html">onblur</span>="validateNumeric"&gt;
            &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                    <h5 id="association_dynamique">Associaion dynamique :</h5>
                    <p>On cherche à associer dynamiquement un gestionnaire d'événement à un élément HTML. Pour ce faire, on utilise le DOM via JavaScript dans un script <span class="em">association_event.js</span> :</p>
<pre class="taille60">document.getElementById("age").addEventListener("blur", function(event) {
    validateNumeric(event.target.value);
}</pre>
                    <p>Et on ajoute un lien vers ce script dans le code HTML :</p>
<pre class="taille60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Validation de formulaire&lt;/title&gt;
        &lt;script type="text/javascript" src="formvalidate.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    
    &lt;body&gt;
        &lt;h1&gt;Validation externe&lt;/h1&gt;
        &lt;form name="InfoPersonnelle"&gt;
            Âge : &lt;input type="text" name="saisie"&gt;
        &lt;/form&gt;
        
        &lt;script type="text/javascript" src="association_event.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                    <p>Notez qu'on préfère charger les scripts d'association en fin de la balise <span class="html">&lt;body&gt;</span>, puisque le code JavaScript est exécuté dès qu'il est chargé; les éléments HTML doivent donc être présents dans le DOM au moment de l'exécution du code.</p>
                    <h5 id="association_dynamique_defer">Association dynamique avec defer :</h5>
                    <p>Si toutefois on veut charger le script à un autre endroit du code HTML, l'attribut <span class="html">defer</span> permet de reporter le chargement du script après la fin du chargement de la page HTML dans son entièreté. Cet attribut n'est disponible que lorsqu'un script est chargé via l'attribut <span class="html">src</span>.</p>
                    <p>Par exemple, on pourrait avoir un fichier de script unique <span class="em">formvalidate_association_events.js</span> :</p>
<pre class="taille60">function validateNumeric (champ) {
    if (isFinite(champ.value)) {
        return true;
    } else {
        alert("Vous ne pouvez entrer que des nombres !");
        return false;
    }
}

const ageElement = document.getElementById("age");

ageElement.addEventListener("blur", function(event) {
    validateNumeric(event.target.value);
});<code></code></pre>
                    <p>Qui est chargé dans le <span class="html">head</span> comme suit :</p>
<pre class="taille60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Validation de formulaire&lt;/title&gt;
        &lt;script defer type="text/javascript" src="formvalidate_association_events.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
            &lt;h1&gt;Validation externe&lt;/h1&gt;
            &lt;form name="InfoPersonnelle"&gt;
                Âge : &lt;input type="text" name="saisie"&gt;
            &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                    <h5 id="association_dynamique_domcontentloaded">Association dynamique avec l'événement DOMContentLoaded :</h5>
                    <p>L'événment <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/DOMContentLoaded_" target="_blank">DOMContentLoaded</a> est émis lorsque le document HTML est chargé et traité dans son entièreté. On peut donc aussi s'en servir afin d'exécuter du code JavaScript une fois que le document complet est à notre disposition.</p>
                    <p>Notre script devient alors :</p>
<pre class="taille60">function validateNumeric (champ) {
    if (isFinite(champ.value)) {
        return true;
    } else {
        alert("Vous ne pouvez entrer que des nombres !");
        return false;
    }
}

document.addEventListener("DOMContentLoaded", function() {
    const ageElement = document.getElementById("age");

    ageElement.addEventListener("blur", function(event) {
        validateNumeric(event.target.value);
    });
});<code></code></pre>
                    <p>Qui est chargé dans le <span class="html">head</span> comme suit :</p>
<pre class="taille60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Validation de formulaire&lt;/title&gt;
        &lt;script type="text/javascript" src="formvalidate_association_DOMContentLoaded.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
            &lt;h1&gt;Validation externe&lt;/h1&gt;
            &lt;form name="InfoPersonnelle"&gt;
                Âge : &lt;input type="text" name="saisie"&gt;
            &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                    <h5>Conclusion :</h5>
                    <p>La méthode recommandée est celle qui utilise l'attribut <span class="html">defer</span> de la balise <span class="html">&lt;script&gt;</span>. Elle est en effet :</p>
                    <ul>
                        <li>Propre : le HTL et le JavaScript sont séparés car <span class="html">defer</span> oblige à utiliser l'attribut <span class="html">src</span>.</li>
                        <li>Lisible: les balises <span class="html">&lt;script&gt;</span> sont rassemblées dans le <span class="html">&lt;head&gt;</span> du HTML.</li>
                        <li>Efficace : la récupération du JavaScript se fait de manière synchrone avec l'analayse du HTML.</li>
                        <li>Sûre : l'exécution des scripts JavaScript a lieu une fois le document HTML complètement construit.</li>
                    </ul>
                    <h2 id="jquery">JQuery :</h2>
                    <p><span class="em">JQuery</span> est une librairie JavaScript qui facilite grandement l'écriture de scripts.</p>
                    <h3 id="intro_jquery">Introduction au JQuery :</h3>
                    <p>JavaScript est parfois lourd à utiliser et impose de reprendre régulièrement le même code, de truffer le code de tests pour s'adapter au navigateur, ... Beaucoup de librairies de scripts permettent d'alléger ou éliminer ces défauts : JQuery, Mootools, Dojo, ...</p>
                    <p>JQuery est certainement la plus répondue et <a href="http://w3techs.com/technologies/details/js-jquery/all/all" target="_blank">un grand nombre de firmes majeures du domaine de l'IT</a> l'utilise). Ses fonctionnalités incluent :</p>
                    <ol>
                        <li>Manipulation du DOM.</li>
                        <li>Manipulation du CSS.</li>
                        <li>Gestion des événements.</li>
                        <li>Animations.</li>
                        <li>Ajax (que nous verrons un peu plus tard).</li>
                    </ol>
                    <p>Une référence de JQuery se trouve à l'adresse <a href="https://jquery.com/" target="_blank">https://jquery.com/</a>.</p>
                    <h3 id="utilisation_jquery">Utilisation :</h3>
                    <h4 id="inclusion_jquery">Inclusion de la librairie :</h4>
                    <p>La librairie elle-même doit référencée dans votre page HTML, soit elle doit être fournie par votre site soit être référencée sur un site tiers.</p>
                    <p>Souvent, on utilise un <a href="https://fr.wikipedia.org/wiki/R%E9seau_de_diffusion_de_contenu)" target="_blank">CDN (ou Content Delivery Network)</a> : une infrastructure réseau permettant de fournir vite et sans interruption de service des ressources stables dans le temos, par exemple celui de :</p>
                    <ol>
                        <li><a href="https://code.jquery.com/" target="_blank">JQuery</a></li>
                        <li><a href="https://developers.google.com/speed/libraries#jquery" target="_blank">Google</a></li>
                        <li><a href="https://docs.microsoft.com/en-us/aspnet/ajax/cdn/overview#jQuery_Releases_on_the_CDN_0" target="_blank">Microsoft</a></li>
                    </ol>
                    <p>D'autres CDN peuvent se trouver à l'adresse <a href="https://jquery.com/download/#other-cdns" target="_blank">https://jquery.com/download/#other-cdns</a>. Ces CDN ont l'avantage d'être utilisés par tellement de sites que les clients de nos pages risquent d'avoir dékà la librairie en mémoire cache (et ne doivent donc pas le re-télécharger). En outre, même si la librairie n'est pas en cache, son téléchargement par l'utilisateur n'utilisera de toute façon pas la bande passante de notre site.</p>
                    <p>On inclut cette librairie comme tout autre script JavaScript, donc :</p>
                    <p class="html">&lt;script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HdCJo=" crossorigin="anonymous"&gt;&lt;/script&gt;</p>
                    <p>Ou plus simplement :</p>
                    <p class="html">&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"&gt;&lt;/script&gt;</p>
                    <p>Ces librairies sont condensées (<span class="em">minified</span> en anglais, représenté dans le nom du fichier par <span class="em">.min</span> pour minimiser le trafic réseau, donc quasiment illisibles (on parle de version de "production"). Nous pouvons accéder à la librairie "lisible à l'adresse <a href="https://code.jquery.com/jquery-3.4.1.js" target="_blank">https://code.jquery.com/jquery-3.4.1.js</a>. Cette version est généralement utilisée pour le développement, elle nous permettra de vérifier qu'il s'agit bien d'un "gros" fichier de fonctions JavaScript.</p>
                    <p>Notons bien sûr que, puisque les scripts JavaScript sont chargés dans leur ordre d'apparition dans le DOM, qu'ilfaudra s'assurer que JQuery est chargé <span class="em">avant</span> nos scripts qui l'utilisent.</p>
                    <h4 id="syntaxe_jquery">Syntaxe de JQuery :</h4>
                    <p>Pour analyser quelques exemples d'utilisations de JQuery, nous utiliserons le fichier suivant :</p>
<pre class="taillle60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Exemples d'utilisation de JQuery&lt;/title&gt;
        &lt;script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HdCJo=" crossorigin="anonymous"&gt;&lt;/script&gt;
        &lt;script src="script.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="a"&gt;TODO write content&lt;/div&gt;
        &lt;p&gt;Coucou&lt;/p&gt;
        &lt;p&gt;Bonjour&lt;/p&gt;
        &lt;p&gt;Hello&lt;/p&gt;
    &lt;;/body&gt;
&lt;/html&gt;</code></pre>
                    <p>Si le script <span class="em">script.js</span> est vide, l'affichage de la page ressemble à ceci :</p>
                    <div id="a">TODO write content</div>
                    <p>Coucou</p>
                    <p>Bonjour</p>
                    <p>Hello</p>
                    <h5 id="fonction_jquery">La fonction JQuery :</h5>
                    <p>La librairie JQuery propose une seule fonction, <span class="html">jQuery()</span>, qui peut aussi être appelée par son alias, <span class="html">$()</span>. Cette fonction permet de rapidement sélectionner un élément, puis d'appeler d'autres fonctions sur cet élément, sous la forme suivante :</p>
                    <p class="html">$(sélecteur).action(...);</p>
                    <p>Cette sélection se fait via des sélecteurs, qui utilisent la même syntaxe que les sélecteurs CSS.</p>
                    <p>Par exemple, le script suivant demande que l'élément dont l'<span class="em">id</span> est "<span class="em">a</span>" soit remplacé par l'argument  de la <span class="em">méthode <span class="html">html()</span></span>, qui est une des méthodes définies dans JQuery.</p>
<pre class="taille60"><code>$(function() {
    $("#a").html("Je modifie ceci avec JQuery.");
}</code></pre>
                   <h5 id="evenements_jquery">Les événements en JQuery :</h5>
                   <p>La plupart des événements du DOM disposent de leur équivalent en JQuery, généralement avec le même nom. Par exemple, la méthode <a href="http://api.jquery.com/click/" target="_blank" class="html">click()</a> associe à l'élément HTML sélectionné un événement qui se produit lorsque l'utilisateur clique sur cet élément.</p>
                   <p>Ajoutons un événement de ce type à notre script :</p>
<pre class="taille60"><code>$(function() {
    $("#a").html('Je modifie ceci avec JQuery.');
    $("#a").click(function() {
        $(this).hide();
    });
});</code></pre>
                    <p>Au moment où l'élément d'identifiant "<span class="em">a</span>" reçoit un clic de souris, il va maintenant disparaître via la méthode <span class="html">hide()</span>, qui permet de "cacher" l'élément. Le mot-clé <span class="html">this</span> désigne l'élément courant.</p>
                    <p>On notera que la méthode <a href="https://api.jquery.com/on/" target="_blank" class="html">on(event, handler)</a> permet d'ajouter le gestionnaire d'un événement via son nom dans le DOM.</p>
                    <p>Enfin, notons que la méthode <span class="html">jquery()</span> (et son alias <span class="html">$()</span>), si elle reçoit un gestionnaire d'événement en paramètre au lieu d'un sélecteur CSS, sert de raccourci à l'expression :</p>
                    <p class="html">$(document).ready(handler);</p>
                    <p>C'est-à-dire qu'il s'agit de l'événement qui se produit lorsque le DOM a terminé de se charger, qui comme nous l'avons vu permet de s'assurer que nos scripts JavaScript s'exécutent sur la page dans son ensemble.</p>
                    <h5 id="methodes_jquery">Les méthodes de JQuery :</h5>
                    <p>Nous avons déjà vu quelques méthodes qui peuvent être appelées sur un élément une fois qu'il a été sélectionné via JQuery. Il ne sera pas possible d'en voir une liste exhaustive dans le cadre de cours : comme toujours, nous ferons référence à la documentation sur le sujet.</p>
                    <p>Notons toutefois quelques méthodes fréquentes :</p>
                    <ol>
                        <li><a href="https://api.jquery.com/html/#html2" target="_blank" class="html">html(text)</a> permetde modifier le contenu d'un élément HTML (similaire à <span class="html">innerHTML</span> du DOM).</li>
                        <li>
                            <p><a href="https://api.jquery.com/css/" target="_blank" class="html">css()</a> permet d'accéder du style CSSde l'élément. Elle admet plusieurs syntaxes :</p>
                            <ol type="(a)">
                                <li><span class="html">css("background")</span> retourne la valeur de la propriété CSS <span class="em">background</span>.</li>
                                <li><span class="html">css("color", "red")</span> modifie la valeur de la propriété CSS <span class="em">color</span> en <span class="em">red</span>.</li>
                                <li><span class="html">css({"color": "red", "font-stle": "italic"})</span> modifie plusieurs propriétés d'un coup.</li>
                            </ol>
                            <p>Par sourci de séparation des rôles dans nos codes, il est généralement préférable de définir une classe CSS possédant ces propriétés, puis de donner cette classe aux éléments correspondants. De cette façon, toutes les informations destyle restent reléguées au CSS.</p>
                        </li>
                        <li>
                            <p><a href="https://api.jquery.com/attr/" target="_blank" class="html">attr()</a> permet d'accéder à un attribut d'un élément HTML. Par exemple :</p>
                            <ol type="(a)">
                                <li><span class="html">attr("class")</span> retourne la valeur de l'attribut <span class="em">class</span> de l'élément.</li>
                                <li><span class="html">attr("class", "myClass")</span> modifie la valeur de l'attribut <span class="em">class</span> de l'élément en <span class="em">myClass</span>.</li>
                            </ol>
                        </li>
                        <li><a href="https://api.jquery.com/find/" target="_blank" class="html">find()</a> cherche et retourne les éléments descendants correspondants à certains critères, comme un sélecteur ou l'appel à la fonction <span class="html">jQuery()</span>. Dans ce deuxième cas, les éléments retournés par cet appel à <span class="html">jQuery()</span> sont filtrés pour me conserver que ceux qui sont descendants de l'élément sur lequel <span class="html">find()</span> est appelé.</li>
                    </ol>
                    <p>Notons que les méthodes qui <span class="em">modifient</span> un élément HTML (y compris par un ajout de gestionnaire d'événement) renvoient l'élément lui-même en résultat. Cela nous permet d'effectuer du <span class="em">chaînage de méthodes</span>, où l'on appelle des méthodes successivement sans devoir rappeler la fonction <span class="html">jQuery()</span>. Cela nous permet d gagner en efficacité, et d'avoir une écriture plus compacte.</p>
                    <p>Par exemple, nous pouvons modifier notre script précédent :</p>
<pre class="taille60"><code>$(function() {
    $("#a").html('Je modifie ceci avec JQuery.').click(function() {
        $(this).hide();
    });
});</code></pre>
                    <h3 id="validation_formulaires_jquery">Validation de formulaires :</h3>
                    <p>Rien n'est prévu à la base de JQuery mais le plugin <a href="https://jqueryvalidation.org/" target="_blank">validate</a> est accessible pour subvenir à nos besoins. Nous devons bien sûr le télécharger :</p>
                    <p class="html">&lt;script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.1/dist/jquery.validate.min.js"&gt;&lt;/script&gt;</p>
                    <p>La validation se fait via la création d'un objet JavaScript dans lequel nous définirons diverses règles que la validation prendra en compte. Nous reviendrons sur la syntaxe des <a href="https://www.w3schools.com/js/js_objects.asp" target="_blank">objets JavaScript</a> lorsque l'on va parler de JSON ci-dessous, mais prenons un exemple :</p>
<pre class="taille60"><code>$("#formId").validate({
    rules: { // gestion des rèfles de validation
        nom: "required", // l'élement de nom "nom" est obligatoire et ne reprend pas d'autre règle
        mail: {
            email: true // l'élement de nom "mail" est un email mais pas obligatoire
        },
        numero: { // numéro obligatoire et compris entre 30000 et 99999
            required: true,
            range: [30000, 99999]
        },
        messages: { // redéfinition desmessages
            nom: "Le nom est obligatoire.",
            mail: {
                email: "Entrez un adresse mail valide."
            },
            numero: {
                required: "Le numéro est obligatoire.",
                range: "Le numéro doit être compris entre {0} et {1}."
            },
            // ...
        }
    }
});</code></pre>
                    <h3 id="animations">Animations :</h3>
                    <p>JQuery permet de réaliser aisément un grand nombre d'<a href="https://api.jquery.com/category/effects/" target="_blank">animations</a>... dont il ne faut bien sûr pas abuser.</p>
                    <p>Prenez le temps de parcourir les quelques exemples présentés par W3Schools à partir de <a href="http://www.w3schools.com/jquery/jquery_hide_show.asp" target="_blank">http://www.w3schools.com/jquery/jquery_hide_show.asp</a>.</p>
                    <p>Un élément à bien comprendre est la notion de <span class="em">callback function</span>.</p>
                </article>
                <article id="ajax">
                    <h2>Ajax :</h2>
                    <h3 id="intro_ajax">Introduction à Ajax :</h3>
                    <p><span class="html">AJAX</span>, nom donné à la mise en oeuvre d'un ensemble de techniques, permet de dynamiser les pages HTML.</p>
                    <p>Avec une page permettant de sélectionner un employé comme ci-dessous :</p>
                    <img src="../images/selection_employe.PNG" alt="Sélectionnez un employé">
                    <p>Dans un site classique, à chaque fois que l'utilisateur choisit un autre département, une requête doit être faite au serveur afin de peupler la liste des employés avec ceux qui correspondent au département demandé. C'est peu efficace, surtout si l'utilisateur revient en arrière et doit dès lors demander une nouvelle liste.</p>
                    <p>Avec <span class="em">AJAX</span>, nous pourrons lancer une requête unique au serveur demandant l'ensemble des employés du département sélectionné et les placer dans la liste déroulante des employés. Généralement, la liste des employés nous sera retournée sous la forme d'un document XML ou JSON.</p>
                    <h3 id="definition_ajax">Définition de AJAX :</h3>
                    <p><span class="em">AJAX</span> signifie <span class="em">Asynchronous JavaScript And Xml</span>. Il ne s'agit pas d'un langage ou d'une librairie, mais d'une démarche permettant de diminuer certaines limitattions imposées aux applications Web par HTTP et HTML.</p>
                    <p>La lacune essentielle des applications Web était leur manque d'intéractivité : toute modification de la page affichée par le navigateur imposait un réaffichage complet.</p>
                    <p>Nous avons déjà aperçu que JavaScript permet d'assouplir ce fait, mais les actions apparaissant dans le navigateur sont réalisées sans aucun contact avec le serveur. Si, par exemple, nous voulons afficher des informations à la demande de l'utilisateur, soit l'ensemble des informations doit être chargé initialement (transfert prohibitif comme l'exemple ci-dessus où le client devrait recevoir tous les départements et tous les employés d!s le premier chargement de la page !), soit la page complète doit être rechargée à chaque action !</p>
                    <p><span class="em">AJAX</span> va nous permettre de nous libérer de ces contraintes. Attention, à nouveau, comme pour JavaScript, il s'agira de ne pas abuser de cette démarche pour ne pas rendre nos pages trop complexes à concevoir et surtout à maintenir. En partier, <span class="em">la logique métier doit rester sur le serveur !</span></p>
                    <p>En reprenant l'acronyme complet, les caractéristiques d'<span class="em">AJAX</span> sont :</p>
                    <ol>
                        <li>Il est <span class="em">Asynchrone</span> : Le client va pouvoir parler au serveur en mode asynchrone. Il demande des informations au serveur et continue son travail. Lorsque la réponse du serveur est prête, un code précédemment spécifié est appelé pour la traiter.</li>
                        <li>Il utilise <span class="em">JavaScript</span> : Du côté client, c'est généralment ce langage qui est utilisé. JavaScript a longtemps été décrié car peu compatible d'un navigateur à l'autre, créant des problèmes de sécurité et finalement essentiellement utilisé pour de futiles effets graphiques. À tel point que les nvaigateurs permettent d'empêcher l'utilisation de JavaScript. Depuis la compatibilité s'est accrue et, surtout, on s'est rendu compte, qu'au-delà des gadgets, il pouvait apporter un réel confort d'utilisation.</li>
                        <li>Il utilise aussi <span class="em">XML</span>, en tant que format utilisé par le serveur pour transmettre des informations au client. C'est parfois également fait avec HTML (rarement, car limité) ou JSON (que nous verrons un plus tard).</li>
                    </ol>
                    <h3 id="mise_en_oeuvre_ajax">Mise en oeuvre :</h3>
                    <p>Nous ne réaliserons réellement ceci que plus tard quand nous programmerons une application web, car les exemples ci-dessus sont prévus pour le protocole <span class="em">http(s)</span> et pas pour le protocole <span class="em">file</span>.</p>
                    <h4 id="meo_js_ajax">En JavaScript :</h4>
                    <p>L'objet JavaScript <a href="https://www.w3schools.com/xml/xml_http.asp" target="_blank" class="html">XMLHttpRequest</a> permet d'exécuter des requêtes HTTP utilisées par Ajax :</p>
                    <p class="html">http = new XMLHttpRequest();</p>
                    <p>Il faut noter qu'anciennement, chaque navigateur utilisait une syntaxe différente, et il fallait procéder via un <span class="em">try catch</span> de JavaScript pour essayer les différentes syntaxes existantes. C'est toutefois du passé.</p>
                    <p>Une fois l'objet créé, il peut être utilisé pour envoyer des requêtes à un serveur, à l'aide de plusieurs méthodes et propriétés :</p>
                    <ol>
                        <li><span class="em">http.open("method", "url")</span> prépare l'envoi d'une requête au serveur reseigné par l'URL mentionnée, avec la méthode renseignée (par exemple "<span class="em">GET</span>" ou "<span class="em">POST</span>").</li>
                        <li><span class="em">http.responseType</span> précise le format dans lequel le serveur va répondre; l'objet se prépare ainsi à recevoir et formater cette réponse.</li>
                        <li><span class="em">http.onreadystatechange</span>est une propriété dans laquelle on peut stocker une fonction, qui sera appelée lorsque la requête a été envoyée et une réponse a été reçue. Les valeurs que l'état peut prendre sont renseignées <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState" target="_blank">ici</a>.</li>
                        <li><span class="em">http.send()</span> envoie la requête au serveur.</li>
                    </ol>
                    <p>Envoyer une requête asynchrone en JavaScript nécessite quatrelignes, c'est quand même dommage d'utiliser une bibliothèque juste pour cela !</p>
<pre class="taille60"><code>function ajax(url, callbackfunction, method = 'GET') {
    let req = new XMLHttpRequest();
    req.open(method, url, true);
    req.onload = callbackfunction;
    req.send();
}

ajax('/monAPI/public/api/v1/info', () => {
    if (this.status === 200) {
        ...
    } else {
        ...
    }
});</code></pre>
                    <p>Cette petite fonction prend en paramètre l'URL de la requête HTTP à envoyern la fonction callback qui sera appeléelorsque la réponse sera parvenue et éventuellement le verbe HTTP à utiliser.</p>
                    <p>Remarque : il est égalemet possible d'utiliser l'API fetch qui est plus moderne que XHR. Néanmoins, Safarine l'implémente que depuis sa version 10.1 datant de mars 2017.</p>
                    <p>Pour plus d'informaions, un tutoriel est disponible sur <a href="https://www.pierre-giraud.com/javascript-apprendre-coder-cours/ajax-xmlhttprequest/" target="_blank">ce site</a>.</p>
                   <p>Un exemple de code complet d'envoi d'une requête serait par exemple :</p>
<pre class="taille60"><code>http = new XMLHttpRequest();
// Fonction appelée quand la réponse est prête.
http.onreadychange = stateChanged;
// Prépare une requête GET asynchrone pour l'URL indiquée.
http.open("GET", "url");
http.send(); // L'envoi au serveur

function stateChanged() {
    if (http.readyState == XMLHttpRequest.DONE) {
        // La réponse est revenue du serveur.
        if (http.status == 200) { // Tout s'est bien passé.
            http.responseText // Contient la réponse.
            http.responseXML // Pour récupérer du XML.
        } else {
            // Gestion de l'erreur.
        }
    }
}</code></pre>
                    <p>Cet envoi de requête est bien asynchrone :</p>
                    <ol>
                        <li>On spécifie les traitements à réaliser lorsque la réponse sera prête, en associant une fonction à la survenue de l'événement <span class="em">onreadystatechange</span>. La classe <span class="em">XMLHttpRequest</span> fournit également d'autres gestionnaires d'événements.</li>
                        <li>On prépare la requête avec la méthode <span class="em">open()</span>, puis on l'envoie au serveur avec <span class="em">send()</span>.</li>
                        <li>Quand la réponse est prête, cela déclenche l'exécution de la méthode spécifiée.</li>
                    </ol>
                    <p>Si vous souhaitez tester ces méthodes sur des fichiers locaux, vous pouvez utiliser le protocole <span class="em">file</span>; toutefois, notez que le code de réponse est alors 0 et non 200 comme pour une requête HTTP qui s'est déroulée avec succès.</p>
                    <h4 id="meo_jquery_ajax">Avec JQuery :</h4>
                    <p>JQuery introduit une fonction <a href="https://www.w3schools.com/jquery/ajax_ajax.asp" class="html" target="_blank">$.ajax()</a> qui permet de définir un appel AJAX avec les paramètres suivants, passés via un objet JavaScript :</p>
                    <ol>
                        <li><span class="html">url</span> : le document ciblé.</li>
                        <li><span class="html">type</span> : les méthodes d'appel.</li>
                        <li><span class="html">data</span> : des données qui accompagnent la requête (par exemple via un formulaire).</li>
                        <li><span class="html">success</span> : la fonction JavaScript à exécuter en cas de réussite.</li>
                        <li><span class="html">error</span> : la fonction JavaScript à exécuter en cas d'échec.</li>
                        <li><span class="html">complete</span> : la fonction JavaScript à exécuter quand tout est terminé.</li>
                    </ol>
                    <p>Par exemple (pris du tutoriel de W3Schools) :</p>
<pre class="taille60"><code>$("button").click(function() {
    $.ajex({
        url: "demo_test.txt",
        success: function(result) {
            $("#div1").html(result);
        }
    });
});</code></pre>
                    <p>Pour des requêtes plus standard, des méthodes prédéfinies existent également :</p>
                    <ol>
                        <li><a href="https://www.w3schools.com/jquery/ajax_load.asp" class="html" target="_blank">$(selector).load(url)</a> charge le contenu de la ressource à l'URL donnée dans l'élément sélectionné.</li>
                        <li><a href="https://www.w3schools.com/jquery/ajax_get.asp" class="html" target="_blank">$.get(url [, data, function, dataType])</a> envoie une requête avec la méthode GET à l'URL donnée.</li>
                        <li><a href="https://www.w3schools.com/jquery/ajax_getjson.asp" class="html" target="_blank">$.getJSON(url [, data, function])</a> envoie une requête avec la méthode GET et attend des données spécifiquement au format JSON.</li>
                        <li><a href="https://www.w3schools.com/jquery/ajax_post.asp" class="html" target="_blank">$.post(url [, data, function, dataType])</a> envoie une requête avec la méthode POST à l'URL donnée.</li>
                    </ol>
                    <h3 id="avantages_inconvenients_ajax">Avantages et inconvénients :</h3>
                    <p><span class="em">AJAX</span> permet de fluidifier les échanges navigateur-serveur et de rendre l'interface utilisateur moins rigide (client "riche"). Il faut toutefois rester attentif à certains points :</p>
                    <ol>
                        <li>Les robots ne référenceront pas les données obtenues au travers d'AJAX.</li>
                        <li>Attention à préserver la fonctionnalité du bouton "Back" du navigateur (des solutions toutes faites existent).</li>
                        <li>Il faut assurer la sécurité des requêtes via AJAX aussi sérieusement que les requêtes "classiques".</li>
                        <li>La notion de lien perd de son sens : fournir un lien à quelqu'un donne accès à la page mais pas nécessairement à l'info que l'on désire faire visualiser.</li>
                    </ol>
                    <p><span class="em">Remarque :</span> Pour des raisons de sécurité, la plupart des navigateurs empêchent d'accéder, par le biais d'AJAX, à une ressource d'un autre serveur que celui qui a fourni la page courante. Ceci peut parfois être modifié, à vos rsiques et périls, dans les paramètres du navigateur.</p>
                </article>
                <article id="json">
                    <h2>Format de données JSON :</h2>
                    <p><span class="em">JSON</span> est un format de données dans les objectifs sont similaires à ceux de <span class="em">XML</span>. Il se distingue par son format très léger.</p>
                    <h3 id="objets_js">Objets JavaScript :</h3>
                    <p>Les <a href="https://www.w3schools.com/js/js_objects.asp" target="_blank">objets JavaScript</a> sont une structure de données permettant de stocker plusieurs informations dans une seule variable. Ces informations sont de deux types :</p>
                    <ul>
                        <li>Des <span class="em">propriétés</span>, qui contiennent des valeurs.</li>
                        <li>Des <span class="em">méthodes</span>, qui contiennent des fonctions.</li>
                    </ul>
                    <p>Contrairement à un langage typé tel que Java, il est possible de créer un objet sans définir une classe qui régit la structure de cet objet. Des classes peuvent être définies en JavaScript, mais leur rôle sert plutôt de générer des objets qui possèdent tous la même structure, puisque JavaScript n'est pas un langage typé.</p>
                    <p>Un objet est défini via des accolades <span class="em">{}</span>, contenant des déclarations sous la forme <span class="em">champ: valeur</span>, séparées par des virgules. Par exemple :</p>
<pre class="taille60"><code>var person = {
    firstName: "John",
    lastName: "Doe",
    age: 50,
    eyeColor: "blue",
    fullName: () =&gt; {
        return this.firstName + " " + this.lastName;
    }
};</code></pre>
                    <p>Cet objet possède quatre propriétés <span class="em">firstName</span>, <span class="em">lastName</span>, <span class="em">age</span> et <span class="em">eyeColor</span>, et une méthode <span class="em">fullName</span>. Notez que les propriétés et méthodes se déclarent exactement de la même façon : c'est la valeur assignée au champ qui détermine s'il s'agit d'une propriété ou méthode.</p>
                    <p>L'accès aux propriétés peut se faire de deux façons <span class="html">nomDeVariable.propriété</span> ou <span class="html">nomDeVariable["propriété"]</span>. Ces notions sont équivalents.</p>
<pre class="taille60"><code>person.firstName; // "John"
person["firstName"]; // "John"
person.age; // 50</code></pre>
                    <p>Quant aux méthodes, il est possible d'appeler la méthode de façon similaire à un appel de fonction classique <span class="html">nomDeVariable.méthode()</span>. Il est toutefois également possible de passer la déclaration de la fonction dans une variable en omettant les parenthèses <span class="html">nomDeVariable.méthode</span>.</p>
<pre class="taille60"><code>person.fullName; // Déclaration de la méthode
person.fullName(); // Appel de la méthode : renvoie "John Doe"</code></pre>
                    <p>On peut donc voir un objet JavaScript comme un dictionnaire mettant en relation des chaînes de caractères à des valeurs ou des fonctions.</p>
                    <h3 id="intro_json">Intoduction à JSON :</h3>
                    <p><a href="https://www.json.org/" class="html" target="_blank">JSON (JavaScript Object Notation)</a> est un format texte qui peut être facilement interprété comme un objet JavaScript, ou un tableau d'objets JavaScript, du moment que ces objets ne possèdent pas de méthodes. Étant un format très léger, il a tedance à supplanter XML dans les services Web et l'utilisation d'AJAX.</p>
                    <p>Les éléments constitutifs sont :</p>
                    <ul>
                        <li>
                            <p>Des objets, représentés comme dans du code JavaScript, entre accolades contenant des propriétés :</p>
                            <ul>
                                <li>Un nom de propriété sous la forme d'une chaîne de caractères. Contrairement à du code JavaScript, le nom de chaque propriété <span class="em">doit être noté entre guillemets</span>.</li>
                                <li>
                                    <p>Une valeur, soit :</p>
                                    <ul>
                                        <li>Une chaîne de caractères entre guillemets, avec certains caractères d'échappements possibles.</li>
                                        <li>Un nombre.</li>
                                        <li>Un booléen (<span class="html">true</span> ou <span class="html">false</span>).</li>
                                        <li>La valeur vide <span class="html">null</span>.</li>
                                        <li>Un objet.</li>
                                        <li>Un tableau.</li>
                                    </ul>
                                    <p>Les propriétés sont séparées par des virgules.</p>
                                </li>                            </ul>
                        </li>
                        <li>Des tableaux, représentés par des crochets, contenant des objets séparés par des virgules.</li>
                    </ul>
                    <p>Les espaces blancs (retours à la ligne, tabulations, etc) ne sont généralement pas pris en compte.</p>
                    <p>Par exemple, les données représentées dans le fichier XML suivant :</p>
<pre class="taille60">&lt;?XML version="1.0" encoding="UTF-8".&gt;
&lt;classe&gt;
    &lt;cours&gt;Développement Internet&lt;/cours&gt;
    &lt;etudiants&gt;
        &lt;etudiant&gt;
            &lt;no&gt;23456&lt;/no&gt;
            &lt;nom&gt;Dupont&lt;/nom&gt;
            &lt;prenom&gt;Marc&lt;/prenom&gt;
        &lt;/etudiant&gt;
        &lt;etudiant&gt;
            &lt;no&gt;24235&lt;/no&gt;
            &lt;nom&gt;Durand&lt;/nom&gt;
            &lt;prenom&gt;Hélène&lt;/prenom&gt;
        &lt;/etudiant&gt;
    &lt;/etudiants&gt;
&lt;/classe&gt;<code></code></pre>
                    <p>Pourraient être représentées via le fichier JSON :</p>
<pre class="taille60"><code>{
    "classe": {
        "cours": "Développement Internet",
        "etudiants": [
            {"no": 23456, "nom": "Dupont", "prenom": "Marc"},
            {"no": 24235, "nom": "Durant", "prenom": "Hélène"}
        ]
    }
}</code></pre>
                    <h3 id="utilisation_json_js">Utilisation de JSON en JavaScript :</h3>
                    <p>La plupart des langages actuels offrent un support à JSON : nous allons aborder l'utilisation de JSON avec JQuer, comme il pourrait être utilisé avec AJAX.</p>
                    <p>Nous allons ici construire une page HTML dotée de trois boutons comme ci-dessous !</p>
<pre class="taille60"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="fr"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Exemple JSON&lt;title&gt;
        &lt;script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="buttons.js"&gt;&lt;/scripts&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="personne"&gt;
            &lt;input type="button" id="b1" value="getPersonne"&gt;
        &lt;/div&gt;
        &lt;div id="personnes"&gt;
            &lt;input type="button" id="b2" value="getPersonnes"&gt;
        &lt;/div&gt;
        &lt;div id="personnesAjax"&gt;
            &lt;input type="button" id="b3" value="getPersonnesAjax"&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                    <p>Avecle fichier <span class="em">personnes.json</span> :</p>
<pre class="taille60"><code>[
    {"nom": "TonNom", "prenom": "TonPrenom"},
    {"nom": "SonNom", "prenom": "SonPrenom"}
]</code></pre>
                    <p>Et le script <span class="em">buttons.js</span> :</p>
<pre class="taille60"><code>varjson1 = '{"nom": "MonNom", "prenom": "MonPrenom"}';
var json2 = '[{"nom": "MonNom", "prenom": "MonPrenom"}, \
            {"nom": "SonNom", "prenom": "SonPrenom"}]';
$(document).ready(() =&gt; {
    $("#b1").click(() =&gt; {
        var une Personne = $.parseJSON(json1);
        $("#personne").html("&lt;p class='personne'&gt;" + unePersonne.nom + ", " + unePersonne.prenom + "&lt;/p&gt;");
    });
    $("#b2").click(() =&gt; {
        var desPersonnes = $.parseJSON(json2);
        var liste = "&lt;ul&gt;";
        $.each(desPersonnes, (idx, personne) =&gt;) {
            liste += "&lt;li classe='personne'&gt;" + personne.nom + ", " + personne.prenom + "&lt;/li&gt;";
        });
        liste += "&lt;/ul&gt;";
        $("#personnes").html(liste);
    });
    $("#b3").click(() =&gt; {
        $.ajaxSetup({mimeType: "text/plain"});
        $.getJSON("personnes.json", (desPersonnes) =&gt;) {
            var liste = "&lt;ul&gt;";
            $.each(desPersonnes, (key, personne) =&gt;) {
                liste += "&lt;li classe='personne'&gt;" + personne.nom + ", " + personne.prenom + "&lt;/li&gt;";
            });
            liste += "&lt;/ul&gt;";
            $("#personnesAajx").html(liste);
        });
    });
});</code></pre>
                    <p>Pour les deux premiers boutons, un gestionnaire d'événement <span class="em">onclick</span> est assigné comme nous l'avons déjà fait. La fonction <span class="html">$.parseJSON()</span> de JQuery permet de transformer une chaîne de caractères déjà stockée dans une variable, et de transformer celle-ci en un objet JavaScript, si le format de la chaîne est un format JSON valide.</p>
                    <p>Pour le troisième bouton, la fonction de JQuery <span class="html">$.getJSON()</span> est appelée à la place. Cette fonction, déjà vue précédemment, envoie unerequête <span class="html">GET</span> à l'adresse renseignée, reçoit une réponse qui est supposée au format JSON, et convertit celle-ci automatiquement en un objet JavaScript (en appelant implicitement la méthode <span class="html">parseJSON()</span>).</p>
                </article>
            <!-- fin de section -->
            </section>
            <footer>
                <div>
                    <address>
                        Professeurs :
                        <a class="mail" href="mailto:olivier.choquet@vinci.be">Choquet Olivier</a>
                        <a class="mail" href="mailto:driss.vandenheede.techinfo@gmail.com">Vandenheede Driss</a>
                    </address>
                </div>
                <div>
                    <p>Si vous détectez une erreur, une faute d'orthographe, n'hésitez pas à envoyer un mail aux adresses juste à côté avec le nom de la page et l'erreur détectée.</p>
                </div>
                <div id="version">
                    <p>Syllabus HTML</p>
                    <p>Version 5.0</p>
                </div>
            </footer>
        </main>
    </body>
</html>